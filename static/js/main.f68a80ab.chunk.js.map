{"version":3,"sources":["components/SideBarUtils.jsx","components/optionsPanels/ColorPicker.jsx","constants.js","utils/googleAuth.js","redux/selectors.js","components/SelectedDataPanel.jsx","redux/utils/reducerFactories.js","redux/utils/modalReducer.js","components/Modal.jsx","components/EditLocusList.jsx","components/AddRows.jsx","components/SearchRows.jsx","components/LeftSideBar.jsx","components/optionsPanels/BamOptionsPanel.jsx","components/optionsPanels/VcfOptionsPanel.jsx","components/optionsPanels/SpliceJunctionsOptionsPanel.jsx","components/optionsPanels/GcnvOptionsPanel.jsx","components/RightSideBar.jsx","components/About.jsx","components/UserInfo.jsx","components/Header.jsx","utils/throttle.js","components/IGV.jsx","components/LoginAndShowIGV.jsx","components/RequestStatus.jsx","utils/localStorage.js","redux/initialState.js","components/InitialSettingsForm.jsx","components/BaseLayout.jsx","redux/rootReducer.js","App.js","index.js"],"names":["CategoryH3","styled","h3","StyledPopup","Popup","ColorLegendIcon","Icon","OptionDiv","div","OptionInputDiv","OptionInput","input","ColorSwatchBorder","ColorSwatch","attrs","flowing","ColorPicker","props","handleChange","color","setState","handleApply","colorChangedHandler","hex","state","on","position","trigger","style","background","this","content","onChangeComplete","onChange","newColor","React","Component","SJ_MOTIFS","googleSignIn","a","gapi","auth2","getAuthInstance","authInstance","isSignedIn","get","signIn","getGoogleUserEmail","user","currentUser","profile","getBasicProfile","getEmail","getGoogleAccessToken","reloadAuthResponse","getAuthResponse","access_token","getLocus","locus","getRightSideBarLocusList","rightSideBarLocusList","getLeftSideBarLocusList","leftSideBarLocusList","getGenome","genome","getDataTypesToShow","dataTypesToShow","getRowsInCategories","rowsInCategories","getSelectedRowNamesByCategoryName","selectedRowNamesByCategoryName","getSelectedSamplesByCategoryNameAndRowName","selectedSamplesByCategoryNameAndRowName","getSjOptions","sjOptions","getVcfOptions","vcfOptions","getBamOptions","bamOptions","getGcnvOptions","gcnvOptions","getUser","getInitialSettingsUrl","initialSettingsUrl","getAllDataTypes","createSelector","reduce","acc","category","rows","forEach","row","data","filter","type","map","dataType","add","Set","getDataTypesUsersCanToggle","dataTypes","size","getEnabledDataTypes","allDataTypes","dataTypesUsersCanToggle","includes","getRowsByCategoryName","categoryName","getSelectedRowsByCategoryName","rowsByCategoryName","Object","entries","selectedRowNames","name","getTracks","selectedRowsByCategoryName","igvTracks","i","junctionsTrack","coverageTrack","j","console","log","url","push","format","label","indexURL","height","trackHeight","min","trackMin","max","trackMax","autoscale","highlightSamples","selectedSamples","sampleName","sampleSettings","onlyHandleClicksForHighlightedSamples","oauthToken","order","rowName","error","minUniquelyMappedReads","minTotalReads","maxFractionMultiMappedReads","minSplicedAlignmentOverhang","thicknessBasedOn","bounceHeightBasedOn","colorBy","colorByNumReadsThreshold","undefined","hideStrand","showOnlyPlusStrand","showOnlyMinusStrand","labelUniqueReadCount","labelMultiMappedReadCount","labelTotalReadCount","labelMotif","labelAnnotatedJunction","labelAnnotatedJunctionValue","hideAnnotatedJunctions","hideAnnotated","hideUnannotatedJunctions","hideUnannotated","hideMotifs","motif","value","indexed","displayMode","viewAsPairs","showSoftClips","tracks","searchable","visibilityWindow","SelectedDataCategory","span","DeleteButton","Button","basic","icon","SampleNameText","SamplePanel","sample","hideSample","updateSampleSettings","numSelectedSamplesInRow","whiteSpace","onClick","marginLeft","key","connect","dispatch","updateGcnvOptions","newSettings","updates","hideRow","selectedSamplesByRowName","sampleSettingsByRowNameAndSampleName","result","categoryObj","margin","length","createSingleValueReducer","updateActionType","initialState","debug","reducer","action","newValue","createSingleObjectReducer","newState","createArrayReducer","actionTypeSuffix","Array","isArray","values","valuesToRemove","v","modals","updatesById","shallowCopy","id","obj","createObjectsByIdReducer","getModalOpen","modalName","open","ButtonLink","padding","fontWeight","ContainerDiv","StyledButton","CustomModal","handleClose","doClose","close","handleSave","cloneElement","Modal","isOpen","onClose","Header","title","floated","Content","children","tabIndex","PureComponent","defaultProps","ownProps","e","preventDefault","confirmed","getState","confirmOnClose","confirming","LinkButton","EditLocusListButtonAndModal","render","locusList","setLocusList","newLocusList","textAreaValue","split","Boolean","Form","Field","control","TextArea","minHeight","defaultValue","onKeyUp","target","placeholder","join","EditLocusList","setLocus","ExampleDiv","ExamplePath","SUPPORTED_FILE_EXTENSIONS","AddRowsButtonAndModal","getInitialState","warningMessage","errorMessage","parseTextAreaValueToRows","trim","invalidPaths","newRowsByRowName","dataPath","pathTokens","fileName","matchingExtensions","keys","ext","endsWith","filePrefix","replace","newRows","handleModalSave","addRows","handleModalClose","fullTitle","fileType","Message","SearchPanelContainer","StyledSearch","Search","INITIAL_STATE","isLoading","results","SearchRows","handleResultSelect","idTokens","getSelectedSamplesForRow","updateSelectedRowNames","updateSelectedSamples","getSelectedRowNames","isRowSelected","getSelectedSamplesByRowName","isSampleSelected","addRowsToHide","resultsByCategoryName","resultsCounter","newResult","_","some","addSamplesToHide","addMatchingSamplesFromRow","inputStringRegExp","dataItemsWithSamples","samples","warn","test","addMatchingRowsAndSamples","matchingRowsByCategoryName","handleSearchChange","setTimeout","RegExp","escapeRegExp","useCategories","resultsArray","item","actionLabel","className","loading","onResultSelect","onSearchChange","actionType","CategoryDetails","DataTypeIcon","dataTypeIconColors","junctions","coverage","alignment","vcf","gcnv_bed","default","dataTypeLabels","bed","gff3","gtf","genePred","bigBed","RowColorLabelsContainer","NoWrapDiv","ShowTrackTypesPanel","enabledDataTypes","updateDataTypesToShow","checkBoxes","charAt","toUpperCase","slice","Checkbox","toLocaleString","checked","toLowerCase","RowColorLabelsWithPopup","d","paddingRight","paddingLeft","colSpan","fontSize","marginTop","s","navigator","clipboard","writeText","CategoryPanel","RowsPanel","RowPanel","data-row","RowDetails","description","dangerouslySetInnerHTML","__html","LeftSideBar","updateSjOptions","updateVcfOptions","updateBamOptions","editedFields","keyCode","handleTextInput","parseInt","compact","StyledRadio","Radio","ColorByLegend","width","inverted","RightSideBar","AboutLink","href","UserInfo","googleUserEmail","HeaderRow","Grid","Row","Column1","Column","Column2","About","throttle","delay","fn","timerId","args","clearTimeout","IGV_SETTINGS","showIdeogram","showNavigation","showRuler","showCenterGuide","showCursorTrackingGuide","showCommandBar","IGV","setContainerElement","element","container","ref","shouldTrackBeReloaded","track","nextProps","junctionTrackDisplaySettingsChanged","vcfTrackDisplaySettingsChanged","alignmentTrackDisplaySettingsChanged","gcnvTrackDisplaySettingsChanged","gcnvTrackHighlightedSamplesChanged","isEqual","getTrackId","getIgvTrackView","trackId","existingTrackViews","browser","trackViews","existingTrackView","existingTrackConfig","config","reloadRemoveAndAddTracks","nextTrackByTrackName","nextTrack","ignoreNextTrackRemovedEvent","removeTrackByName","loadTrack","locusChangedHandler","trackRemovedHandler","igvBrowserOptions","igv","createBrowser","then","window","igvBrowser","currentIGVLocus","$searchInput","val","nextIGVLocus","search","event","newLocus","trackName","SignInButtonContainer","InfoContainer","LoginAndShowIGV","handleGoogleSignIn","show","userChangedHandler","dataPathCounter","buckets","startsWith","bucket","from","clientId","TGG_VIEWER_CLIENT_ID","theme","buttonText","onSuccess","onFailure","cookiePolicy","Promise","resolve","load","client","init","scope","discoveryDocs","RequestStatus","status","IN_PROGRESS","SUCCEEDED","successMessage","ERROR","NONE","CACHE","DEFAULT_STATE","alignmentShading","KEYS_TO_PERSIST_IN_LOCAL_STORAGE","getStateFromLocalStorage","serializedState","localStorage","getItem","jsonString","LZString","decompress","JSON","parse","err","loadState","KEYS_TO_PERSIST_IN_URL","getStateFromUrlHash","REVERSE_KEY_NAME_LOOKUP","hashString","location","hash","keyValue","keyValueList","jsurl","updateLocalStorageAndUrl","stringify","compress","setItem","saveState","hashKeyValueList","StyledDiv","StyledInput","Input","InitialSettingsForm","loadInitialSettingsUrl","overrideLocalSettings","globalState","updateInitialSettingsUrl","resetGlobalState","stateFromLocalStorage","stateFromUrlHash","Error","isYaml","isJson","isUnknown","fetch","response","ok","statusText","text","fileContents","settings","yaml","safeLoad","filteredSettings","applyInitialSettingsUrl","requestStatus","toString","exportCurrentSettings","EXCLUDED_KEYS","globalStateForExport","encodeURIComponent","textInputValue","align","download","newUrl","SideBarColumn","MiddleColumn","otherReducers","combineReducers","assign","updatedRows","existingNames","previousList","updatedList","trace","previousSelectedSamplesByRowName","previousSampleSettingsByRowNameAndSampleName","updatedSelectedSamplesByRowName","updatedSampleSettingsByRowNameAndSampleName","previousSampleSettingsBySampleName","newSampleSettingsBySampleName","mergedSamplesSettingsBySampleName","mergedSampleSettings","modalReducers","rootReducer","nextState","createReduxStore","computeInitialState","createStore","compose","applyMiddleware","thunkMiddleware","App","store","BaseLayout","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.f68a80ab.chunk.js","sourcesContent":["import styled from 'styled-components'\nimport { Icon, Popup } from 'semantic-ui-react'\n\nexport const CategoryH3 = styled.h3` \n  display: inline-block;\n  margin: 12px 0px 0px 0px !important;\n`\n\nexport const StyledPopup = styled(Popup)`\n  opacity: 0.95;\n`\n\nexport const ColorLegendIcon = styled(Icon)`\n  margin-top: 5px !important;\n`\n\nexport const OptionDiv = styled.div`\n  padding-top: 3px;\n`\n\nexport const OptionInputDiv = styled(OptionDiv)`\n  margin: 10px 0px; \n`\n\nexport const OptionInput = styled.input`\n  display: inline;\n  width: 50px;\n  margin-left: 5px;\n  padding-left: 5px;\n`\n","/* eslint-disable react/require-optimization */\n/* eslint-disable react/destructuring-assignment */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { SwatchesPicker } from 'react-color'\nimport { Popup } from 'semantic-ui-react'\n\nconst ColorSwatchBorder = styled.div`\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  padding: 1px 2px;\n  background: #fff;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n`\n\nconst ColorSwatch = styled.div`\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n  width: 10px;\n  height: 12px;\n`\n\nconst StyledPopup = styled(Popup).attrs({ flowing: true })`\n  padding: 0px !important;\n  div {\n    overflow-y: visible !important;\n  }\n`\n\n/*\nconst ApplyButton = styled(Button)`\n  margin-top: 15px !important;\n`\n<div style={{ textAlign: 'center' }}><ApplyButton onClick={() => this.handleApply(this.state.color)}>Apply</ApplyButton></div>\n*/\n\nclass ColorPicker extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = { color: this.props.color }\n  }\n\n  handleChange = (color) => {\n    this.setState({ color })\n  }\n\n  handleApply = (color) => {\n    this.props.colorChangedHandler(color.hex)\n  }\n\n  render() {\n    return (\n      <StyledPopup\n        on=\"click\"\n        position=\"left center\"\n        trigger={\n          <ColorSwatchBorder>\n            <ColorSwatch style={{ background: this.state.color }} />\n          </ColorSwatchBorder>\n        }\n        content={\n          <SwatchesPicker\n            color={this.state.color}\n            onChangeComplete={this.handleApply}\n            onChange={(newColor) => this.setState({ color: newColor })}\n          />\n        }\n      />\n    )\n  }\n}\n\nColorPicker.propTypes = {\n  color: PropTypes.string.isRequired,\n  colorChangedHandler: PropTypes.func.isRequired,\n}\n\nexport default ColorPicker\n","\nexport const SJ_MOTIFS = ['GT/AG', 'CT/AC', 'GC/AG', 'CT/GC', 'AT/AC', 'GT/AT', 'non-canonical']\nexport const SJ_DEFAULT_COLOR_BY_NUM_READS_THRESHOLD = 5\n\nexport const GCNV_DEFAULT_HIGHLIGHT_COLOR = 'blue'\n","/* eslint-disable no-undef */\n\nconst TGG_VIEWER_CLIENT_ID = '61200892608-qphtf65o323setqdcfj4hnf601mmetvs.apps.googleusercontent.com'\n\nexport const initGoogleClient = () => new Promise((resolve) => {\n  if (typeof gapi === 'undefined') {\n    return\n  }\n  // init all gapi modules\n  gapi.load('client:auth2', () => {\n    gapi.client.load('storage', 'v1', () => {\n      gapi.client.init({\n        clientId: TGG_VIEWER_CLIENT_ID,\n        scope: 'https://www.googleapis.com/auth/devstorage.read_only',\n        discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/storage/v1/rest'],\n      })\n      resolve()\n    })\n  })\n})\n\nexport const isSignedIn = async () => {\n  const authInstance = await gapi.auth2.getAuthInstance()\n  return authInstance.isSignedIn.get()\n}\n\nexport const googleSignIn = async () => {\n  const authInstance = await gapi.auth2.getAuthInstance()\n  if (!authInstance.isSignedIn.get()) {\n    await authInstance.signIn()\n  }\n}\n\nexport const getGoogleUserEmail = async () => {\n  const authInstance = await gapi.auth2.getAuthInstance()\n  const user = authInstance && authInstance.currentUser && authInstance.currentUser.get()\n  const profile = user && user.getBasicProfile()\n  return profile && profile.getEmail()\n}\n\nexport const getGoogleAccessToken = async () => {\n  // use OAuth2 to get an access token for RNA-seq viewer to access the google storage API on behalf of the user\n  const authInstance = await gapi.auth2.getAuthInstance()\n  const user = authInstance && authInstance.currentUser && authInstance.currentUser.get()\n  if (!authInstance.isSignedIn.get()) {\n    user.reloadAuthResponse()\n  }\n  return user.getAuthResponse().access_token\n}\n\nexport const googleSignOut = async () => {\n  const authInstance = await gapi.auth2.getAuthInstance()\n  if (authInstance.isSignedIn.get()) {\n    await authInstance.signOut()\n  }\n}\n\nexport const listGoogleStorageFiles = async (gsPath) => {\n  if (!gsPath.startsWith('gs://')) {\n    console.error(`${gsPath} doesn't start with \"gs://\"`)\n    return []\n  }\n\n  const gsPathParts = gsPath.split('/')\n  if (gsPathParts.length < 3) {\n    console.error(`${gsPath} must be of the form \"gs://bucket-name/...\"`)\n    return []\n  }\n\n  const bucketName = gsPathParts[2]\n  const bucketSubdir = gsPathParts.slice(3).join('/')\n\n  return gapi.client.storage.objects.list({ bucket: bucketName, prefix: bucketSubdir, maxResults: 1000 })\n}\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable object-shorthand */\n/* eslint-disable array-callback-return */\n\nimport { createSelector } from 'reselect'\nimport { getGoogleAccessToken } from '../utils/googleAuth'\nimport { SJ_MOTIFS, SJ_DEFAULT_COLOR_BY_NUM_READS_THRESHOLD, GCNV_DEFAULT_HIGHLIGHT_COLOR } from '../constants'\n\nexport const getLocus = (state) => state.locus\nexport const getRightSideBarLocusList = (state) => state.rightSideBarLocusList\nexport const getLeftSideBarLocusList = (state) => state.leftSideBarLocusList\nexport const getGenome = (state) => state.genome\nexport const getDataTypesToShow = (state) => state.dataTypesToShow\nexport const getRowsInCategories = (state) => state.rowsInCategories\nexport const getSelectedRowNamesByCategoryName = (state) => state.selectedRowNamesByCategoryName\nexport const getSelectedSamplesByCategoryNameAndRowName = (state) => state.selectedSamplesByCategoryNameAndRowName\nexport const getSjOptions = (state) => state.sjOptions\nexport const getVcfOptions = (state) => state.vcfOptions\nexport const getBamOptions = (state) => state.bamOptions\nexport const getGcnvOptions = (state) => state.gcnvOptions\nexport const getUser = (state) => state.user\nexport const getInitialSettingsUrl = (state) => state.initialSettingsUrl\n\nexport const getAllDataTypes = createSelector(\n  getRowsInCategories,\n  (rowsInCategories) => {\n    return [...rowsInCategories.reduce((acc, category) => {\n      category.rows.forEach((row) => {\n        if (row.data) {\n          const dataTypes = row.data.filter((data) => data.type).map((data) => data.type)\n          dataTypes.forEach((dataType) => {\n            acc.add(dataType)\n          })\n        }\n      })\n      return acc\n    }, new Set())]\n  })\n\n\nexport const getDataTypesUsersCanToggle = createSelector(\n  getRowsInCategories,\n  (rowsInCategories) => {\n    return [...rowsInCategories.reduce((acc, category) => {\n      category.rows.forEach((row) => {\n        if (row.data) {\n          const dataTypes = row.data.filter((data) => data.type).map((data) => data.type)\n          if (new Set(dataTypes).size >= 2) { // only include data types when a row has more than one data type\n            dataTypes.forEach((dataType) => {\n              acc.add(dataType)\n            })\n          }\n        }\n      })\n      return acc\n    }, new Set())]\n  })\n\nexport const getEnabledDataTypes = createSelector(\n  getAllDataTypes,\n  getDataTypesUsersCanToggle,\n  getDataTypesToShow,\n  (allDataTypes, dataTypesUsersCanToggle, dataTypesToShow) => {\n    return allDataTypes.filter((dataType) => (dataTypesUsersCanToggle.includes(dataType) ? dataTypesToShow.includes(dataType) : true))\n  })\n\nexport const getRowsByCategoryName = createSelector(\n  getRowsInCategories,\n  (rowsInCategories) => {\n    return rowsInCategories.reduce((acc, category) => {\n      return { ...acc, [category.categoryName]: category.rows }\n    }, {})\n  })\n\n\nexport const getSelectedRowsByCategoryName = createSelector(\n  getSelectedRowNamesByCategoryName,\n  getRowsByCategoryName,\n  (selectedRowNamesByCategoryName, rowsByCategoryName) => {\n    return Object.entries(selectedRowNamesByCategoryName).reduce((acc, [categoryName, selectedRowNames]) => {\n      if (!rowsByCategoryName[categoryName]) {\n        return acc\n      }\n      return { ...acc, [categoryName]: rowsByCategoryName[categoryName].filter((row) => selectedRowNames.includes(row.name)) }\n    }, {})\n  })\n\n\nexport const getTracks = createSelector(\n  getSelectedRowsByCategoryName,\n  getSelectedSamplesByCategoryNameAndRowName,\n  getDataTypesToShow,\n  getSjOptions,\n  getVcfOptions,\n  getBamOptions,\n  getGcnvOptions,\n  (\n    selectedRowsByCategoryName,\n    selectedSamplesByCategoryNameAndRowName,\n    dataTypesToShow,\n    sjOptions,\n    vcfOptions,\n    bamOptions,\n    gcnvOptions,\n  ) => {\n    const igvTracks = []\n\n    Object.entries(selectedRowsByCategoryName).forEach(([categoryName, selectedRows]) => selectedRows.forEach((row, i) => {\n      let junctionsTrack\n      let coverageTrack\n      (row.data || []).forEach((data, j) => {\n        //docs @ https://github.com/igvteam/igv.js/wiki/Wig-Track\n        if (!dataTypesToShow.includes(data.type)) {\n          console.log(`Skipping hidden track: ${data.url}`)\n          return\n        }\n\n        if (data.type === 'gcnv_bed') { // && vcfOptions.showGcnv\n          //docs @ https://github.com/igvteam/igv.js/wiki/Alignment-Track\n          console.log(`Adding ${data.url} track #`)\n\n          igvTracks.push({\n            type: 'gcnv',\n            format: 'gcnv',\n            name: `${row.name} ${data.label || ''}`,\n            url: data.url,\n            indexURL: `${data.url}.tbi`,\n            height: gcnvOptions.trackHeight,\n            min: gcnvOptions.trackMin,\n            max: gcnvOptions.trackMax,\n            autoscale: gcnvOptions.autoscale,\n            highlightSamples: (((selectedSamplesByCategoryNameAndRowName[categoryName] || {}).selectedSamples || {})[row.name] || []).reduce(\n              (acc, sampleName) => {\n                acc[sampleName] = ((((selectedSamplesByCategoryNameAndRowName[categoryName] || {}).sampleSettings || {})[row.name] || {})[sampleName] || {}).color || GCNV_DEFAULT_HIGHLIGHT_COLOR\n                return acc\n              }, {}),\n            onlyHandleClicksForHighlightedSamples: gcnvOptions.onlyHandleClicksForHighlightedSamples,\n            oauthToken: getGoogleAccessToken,\n            order: i * 100 + j,\n            rowName: row.name,\n            categoryName: categoryName,\n          })\n        }\n        else if (data.type === 'junctions') {\n          if (junctionsTrack) {\n            console.error('More than one \"junctions\" track found in row', row)\n            return\n          }\n\n          junctionsTrack = {\n            type: 'spliceJunctions',\n            format: 'bed',\n            url: data.url,\n            indexURL: `${data.url}.tbi`,\n            oauthToken: getGoogleAccessToken,\n            order: i * 10,\n            name: row.name,\n            height: sjOptions.trackHeight,\n            minUniquelyMappedReads: sjOptions.minUniquelyMappedReads,\n            minTotalReads: sjOptions.minTotalReads,\n            maxFractionMultiMappedReads: sjOptions.maxFractionMultiMappedReads,\n            minSplicedAlignmentOverhang: sjOptions.minSplicedAlignmentOverhang,\n            thicknessBasedOn: sjOptions.thicknessBasedOn, //options: numUniqueReads (default), numReads, isAnnotatedJunction\n            bounceHeightBasedOn: sjOptions.bounceHeightBasedOn, //options: random (default), distance, thickness\n            colorBy: sjOptions.colorBy, //options: numUniqueReads (default), numReads, isAnnotatedJunction, strand, motif\n            colorByNumReadsThreshold: sjOptions.colorByNumReadsThreshold !== undefined ? sjOptions.colorByNumReadsThreshold : SJ_DEFAULT_COLOR_BY_NUM_READS_THRESHOLD,\n            hideStrand: sjOptions.showOnlyPlusStrand ? '-' : (sjOptions.showOnlyMinusStrand ? '+' : undefined),\n            labelUniqueReadCount: sjOptions.labelUniqueReadCount,\n            labelMultiMappedReadCount: sjOptions.labelMultiMappedReadCount,\n            labelTotalReadCount: sjOptions.labelTotalReadCount,\n            labelMotif: sjOptions.labelMotif,\n            labelAnnotatedJunction: sjOptions.labelAnnotatedJunction && sjOptions.labelAnnotatedJunctionValue,\n            hideAnnotatedJunctions: sjOptions.hideAnnotated,\n            hideUnannotatedJunctions: sjOptions.hideUnannotated,\n            hideMotifs: SJ_MOTIFS.filter((motif) => sjOptions[`hideMotif${motif}`]), //options: 'GT/AG', 'CT/AC', 'GC/AG', 'CT/GC', 'AT/AC', 'GT/AT', 'non-canonical'\n            rowName: row.name,\n            categoryName: categoryName,\n          }\n        }\n        else if (data.type === 'coverage') {\n          if (coverageTrack) {\n            console.error('More than one \"coverage\" track found in row', row)\n            return\n          }\n\n          coverageTrack = {\n            type: 'wig',\n            format: 'bigwig',\n            url: data.url,\n            oauthToken: getGoogleAccessToken,\n            name: row.name,\n            height: sjOptions.trackHeight,\n            order: i * 10 + j,\n            rowName: row.name,\n            categoryName: categoryName,\n          }\n\n          if (data.url.includes('spliceai')) {\n            coverageTrack.color = (value) => {\n              let c\n              if (value < 0.5) {\n                c = 'rgb(180,180,180)'\n              }\n              else if (value < 0.8) {\n                c = 'rgb(180,180,0)'\n              }\n              else {\n                c = 'rgb(200,0,0)'\n              }\n\n              return c\n            }\n          }\n        }\n        else if (['bed', 'gff3', 'gtf', 'genePred', 'genePredExt', 'peaks', 'narrowPeak', 'broadPeak', 'bigBed', 'bedpe'].includes(data.type)) {\n          //docs @ https://github.com/igvteam/igv.js/wiki/Alignment-Track\n          console.log(`Adding ${data.url} track #`)\n\n          igvTracks.push({\n            type: 'annotation',\n            format: 'bed',\n            name: `${row.name} ${data.label || ''}`,\n            url: data.url,\n            indexURL: `${data.url}.tbi`,\n            height: gcnvOptions.trackHeight,\n          })\n        }\n        else if ((data.type === 'vcf' || data.url.includes('.vcf')) && dataTypesToShow.includes('vcf')) {\n          //docs @ https://github.com/igvteam/igv.js/wiki/Alignment-Track\n          console.log(`Adding ${data.url} track #`)\n\n          igvTracks.push({\n            type: 'variant',\n            format: 'vcf',\n            url: data.url,\n            indexURL: `${data.url}.tbi`,\n            indexed: true,\n            name: `${row.name} ${data.label || 'vcf'}`,\n            displayMode: vcfOptions.displayMode,\n            oauthToken: getGoogleAccessToken,\n            order: i * 100 + j,\n            rowName: row.name,\n            categoryName: categoryName,\n          })\n        }\n        else if (data.type === 'alignment' || data.url.includes('.bam') || data.url.includes('.cram')) {\n          //docs @ https://github.com/igvteam/igv.js/wiki/Alignment-Track\n          console.log(`Adding ${data.url} track #`)\n\n          igvTracks.push({\n            type: 'alignment',\n            url: data.url,\n            indexed: true,\n            name: `${row.name} ${data.label || 'bam'}`,\n            height: bamOptions.trackHeight,\n            colorBy: bamOptions.colorBy,\n            viewAsPairs: bamOptions.viewAsPairs,\n            showSoftClips: bamOptions.showSoftClips,\n            oauthToken: getGoogleAccessToken,\n            order: i * 100 + j,\n            rowName: row.name,\n            categoryName: categoryName,\n          })\n        }\n      })\n\n      if (coverageTrack && junctionsTrack) {\n        console.log(`Adding ${junctionsTrack.url} & ${coverageTrack.url} track`)\n        igvTracks.push({\n          type: 'merged',\n          name: junctionsTrack.name,\n          height: sjOptions.trackHeight,\n          tracks: [coverageTrack, junctionsTrack],\n          order: i * 10 + 2,\n          rowName: row.name,\n          categoryName: categoryName,\n        })\n      } else if (junctionsTrack) {\n        console.log(`Adding ${junctionsTrack.url} track`)\n        igvTracks.push(junctionsTrack)\n      } else if (coverageTrack) {\n        console.log(`Adding ${coverageTrack.url} track`)\n        igvTracks.push(coverageTrack)\n      }\n    }))\n\n    igvTracks.push({\n      name: 'Gencode v32 Genes',\n      format: 'refgene',\n      url: 'gs://tgg-viewer/ref/GRCh38/gencode_v32/gencode_v32_knownGene.sorted.txt.gz',\n      indexURL: 'gs://tgg-viewer/ref/GRCh38/gencode_v32/gencode_v32_knownGene.sorted.txt.gz.tbi',\n      indexed: true,\n      searchable: true,\n      height: 350,\n      visibilityWindow: -1,\n      displayMode: 'EXPANDED',\n      order: 1000001,\n      color: 'rgb(76,171,225)',\n      oauthToken: getGoogleAccessToken,\n    })\n\n    return igvTracks\n  },\n)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, Icon } from 'semantic-ui-react'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport ColorPicker from './optionsPanels/ColorPicker'\nimport { GCNV_DEFAULT_HIGHLIGHT_COLOR } from '../constants'\nimport { getSelectedSamplesByCategoryNameAndRowName } from '../redux/selectors'\n\nconst SelectedDataCategory = styled.span`\n  margin: 10px 0px 8px 0px;\n  font-style: italic;\n`\n\nconst DeleteButton = styled(Button).attrs({ basic: true, icon: true })`\n  padding: 0px !important;\n  box-shadow: none !important;\n`\n\nconst SampleNameText = styled.span`\n  word-wrap: break-word;\n  word-break: break-all;  \n  white-space: normal;\n`\n\nconst SamplePanel = ({ categoryName, rowName, sample, sampleSettings, hideSample, updateSampleSettings, numSelectedSamplesInRow }) => (\n  <div style={{ whiteSpace: 'nowrap' }}>\n    <DeleteButton onClick={() => hideSample(categoryName, rowName, sample, numSelectedSamplesInRow)}>\n      <Icon name=\"delete\" />\n    </DeleteButton>\n    <SampleNameText>{sample}</SampleNameText>\n    <span style={{ marginLeft: '8px' }}>\n      <ColorPicker\n        key={sampleSettings.color}\n        color={sampleSettings.color || GCNV_DEFAULT_HIGHLIGHT_COLOR}\n        colorChangedHandler={(newColor) => updateSampleSettings(categoryName, rowName, sample, { color: newColor })}\n      />\n    </span>\n  </div>)\n\n\nSamplePanel.propTypes = {\n  categoryName: PropTypes.string,\n  rowName: PropTypes.string,\n  sample: PropTypes.string,\n  sampleSettings: PropTypes.object,\n  hideSample: PropTypes.func,\n  updateSampleSettings: PropTypes.func,\n  numSelectedSamplesInRow: PropTypes.number,\n}\n\nconst SelectedDataPanel = ({ selectedSamplesByCategoryNameAndRowName, hideRow, hideSample, updateSampleSettings }) => {\n  const result = []\n  Object.entries(selectedSamplesByCategoryNameAndRowName).forEach(([categoryName, categoryObj]) => {\n    Object.entries(categoryObj.selectedSamples || {}).forEach(([rowName, selectedSamples]) => {\n      result.push(\n        <div key={`${categoryName}!!${rowName}`}>\n          <div style={{ whiteSpace: 'nowrap', margin: '15px 0px 7px 0px' }}>\n            {\n              /*<DeleteButton onClick={() => hideRow(categoryName, rowName)}>\n                <Icon name=\"delete\" />\n              </DeleteButton>\n              */\n            }\n            <SelectedDataCategory>{`${categoryName}: ${rowName}`}</SelectedDataCategory>\n          </div>\n          {\n            selectedSamples.map((sample) => (\n              <SamplePanel\n                key={sample}\n                categoryName={categoryName}\n                rowName={rowName}\n                sample={sample}\n                sampleSettings={((categoryObj.sampleSettings || {})[rowName] || {})[sample] || {}}\n                hideRow={hideRow}\n                hideSample={hideSample}\n                updateSampleSettings={updateSampleSettings}\n                numSelectedSamplesInRow={selectedSamples.length}\n              />),\n            )\n          }\n        </div>)\n    })\n  })\n\n  return result.length > 0 ? result : null\n}\n\nSelectedDataPanel.propTypes = {\n  selectedSamplesByCategoryNameAndRowName: PropTypes.object,\n  hideRow: PropTypes.func,\n  hideSample: PropTypes.func,\n  updateSampleSettings: PropTypes.func,\n}\n\n\nconst mapStateToProps = (state) => ({\n  selectedSamplesByCategoryNameAndRowName: getSelectedSamplesByCategoryNameAndRowName(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateGcnvOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_GCNV_OPTIONS',\n      updates: newSettings,\n    })\n  },\n  hideRow: (categoryName, rowName) => {\n    dispatch({\n      type: 'REMOVE_SELECTED_ROW_NAMES',\n      categoryName,\n      selectedRowNames: [rowName],\n    })\n  },\n  hideSample: (categoryName, rowName, sample, numSelectedSamplesInRow) => {\n    if (numSelectedSamplesInRow <= 1) {\n      // if the last sample is being hidden, hide the row as well\n      dispatch({\n        type: 'REMOVE_SELECTED_ROW_NAMES',\n        categoryName,\n        selectedRowNames: [rowName],\n      })\n    }\n\n    dispatch({\n      type: 'REMOVE_SELECTED_SAMPLES',\n      categoryName,\n      selectedSamplesByRowName: {\n        [rowName]: [sample],\n      },\n    })\n  },\n  updateSampleSettings: (categoryName, rowName, sample, newSettings) => {\n    dispatch({\n      type: 'UPDATE_SAMPLE_SETTINGS',\n      categoryName,\n      sampleSettingsByRowNameAndSampleName: {\n        [rowName]: {\n          [sample]: newSettings,\n        },\n      },\n    })\n  },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectedDataPanel)\n","/**\n * Redux reducers take a 'state' object representing the current application\n * state, and an 'action' object specifying some change to that state.\n * They apply the change and return the updated 'state' object.\n * For more details, see: http://redux.js.org/docs/basics/Reducers.html\n *\n * This module provides generic reducers that can be used to manage the following common types of\n * state shapes:\n *\n * { ... } - zero actions - arbitrary state shape that doesn't change after it's initialized, so\n *          this reducer doesn't perform any actions.\n *\n * value - single value - reducer supports 1 action that replaces the value with a new value.\n *\n * { key1: value1, key2: value2 .. } - single object - reducer supports 1 action that allows\n *          changing the values of one or more keys.\n *\n * { id1: { key1: value1, key2: value2, .. },\n *   id2: { key1: value1, key2: value2, .. },\n *   id3: ... }  -  objects by id - reducer supports several actions:\n *          adding or deleting objects by id, and updating the values within one or more objects\n *          specified by id.\n *\n *\n * ==========\n * Additional state shapes that may be implemnted as needed:\n *\n * { id1: value1, id2: value2 .. } - values by id - reducer supports several actions:\n *          adding or deleting values by id, and replacing one or more values by id.\n *\n * [ value1, value2, .. ] - single array - supports actions that add and remove values from the array\n *\n * { id1: [ value1, value2, .. ]\n *   id2: [ value1, value2, .. ] - arrays by id\n */\n\n/**\n * Reducer that can be used to manage any state that doesn't change after it's initialized.\n */\nexport const zeroActionsReducer = (state = {}) => {\n  return state\n}\n\n/**\n * Factory function that creates a reducer for managing any state object that's treated as a single\n * atomic value, where the only supported modification is to replace this value with a new value.\n *\n * As an example use case, lets say an app has one or more on/off toggles. Each of these toggles is\n * bound to a single state variable: 'isOn' which is either true or false.\n *\n * This function can be used to create the reducer(s) for managing a toggle's state:\n *\n * const rootReducer = combineReducers({\n *        toggleA: createSingleValueReducer('UPDATE_TOGGLE_A'),\n *        toggleB: createSingleValueReducer('UPDATE_TOGGLE_B'),\n *        ...\n *      })\n *\n * Here, the argument 'UPDATE_TOGGLE_A' specifies the action type that will later be dispatched\n * to update that toggle's state. For example, to set a toggle to \"off\":\n *\n * dispatch({\n *      type: 'UPDATE_TOGGLE_A',\n *      newValue: false,\n * })\n *\n * @param updateActionType (string) action.type that will later be used to replace the state with a\n * new state.\n */\nexport const createSingleValueReducer = (updateActionType, initialState, debug = false) => {\n  const reducer = (state = initialState, action) => {\n    if (!action) {\n      return state\n    }\n\n    switch (action.type) {\n      case updateActionType: {\n        if (action.newValue === undefined) {\n          console.error(`Invalid ${updateActionType} action: action.newValue is undefined: `, action)\n          return state\n        }\n        if (debug) {\n          console.log('singleValueReducer: applying action: ', action, 'State changing from ', state, ' to ', action.newValue)\n        }\n        return action.newValue\n      }\n      default:\n        return state\n    }\n  }\n\n  return reducer\n}\n\n\n/**\n * Factory function that creates a reducer for managing a state object with some fixed set of keys.\n * The reducer supports an 'UPDATE' action that can be used to set one or more\n * of these keys to new values.\n *\n * As an example use case, lets say an app displays several instances of a widget whose state\n * consists of this state object:\n *\n *    { isVisible: true, size: 5, names:  ['bob', 'gary', .. ], ... }\n *\n * This function can be used to create a reducer for this state:\n *\n *    const widgetReducer = createSingleObjectReducer('UPDATE_WIDGET')\n *\n * Here, the argument 'UPDATE_WIDGET' specifies the action type that will later be dispatched to\n * update the widget's state.\n *\n * After this, an action with type 'UPDATE_WIDGET' can be dispatched:\n *\n *    dispatch({\n *      type: 'UPDATE_WIDGET',\n *      updates: { isVisible: false, names: ['jim', 'liza'] }\n *    })\n *\n * which will cause the state object to be updated to:\n *\n *    { isVisible: false, size: 5, names:  ['jim', 'liza'], ... }\n *\n * These reducers can also be used with combineReducers(..):\n *\n *    const rootReducer = combineReducers({\n *        widget1: createSingleObjectReducer('UPDATE_WIDGET1'),\n *        widget2: createSingleObjectReducer('UPDATE_WIDGET2'),\n *        other: ..,\n *        ..\n *    })\n *\n * @param updateActionType (string) action.type that will later be used to update the state object.\n */\nexport const createSingleObjectReducer = (updateActionType, initialState = {}, debug = false) => {\n  const reducer = (state = initialState, action) => {\n    if (!action) {\n      return state\n    }\n\n    switch (action.type) {\n      case updateActionType: {\n        if (action.updates === undefined) {\n          console.error(`Invalid ${updateActionType} action: action.updates is undefined: `, action)\n          return state\n        }\n\n        const newState = { ...state, ...action.updates }\n        if (debug) {\n          console.log('singleObjectReducer: applying action: ', action, 'State changing from ', state, ' to ', newState)\n        }\n        return newState\n      }\n      default:\n        return state\n    }\n  }\n\n  return reducer\n}\n\n\n/**\n * Factory function that creates a reducer for managing an array of items.\n * The reducer supports 'ADD' and 'REMOVE' actions for adding/removing one or more items from the array.\n * It also supports a 'SET' action that replaces the existing array with a new one (or can be used to set\n * it to an empty array).\n *\n * An example use case is a list of track names in IGV:\n *\n *    [ 'Sample1', 'Sample2']\n *\n * This function can be used to create a reducer for this state:\n *\n *    const samplesReducer = createArrayReducer('SAMPLES', [ 'Sample1', 'Sample2'])\n *\n * Here, the argument 'SAMPLES' means the reducer will support the following action types:\n *    'ADD_SAMPLES'     (to add one or more samples to the end of the list)\n *    'REMOVE_SAMPLES'  (to remove or more samples from the list)\n *    'SET_SAMPLES'     (to replace existing samples with a new array of 0 or more samples)\n *\n * After this, an 'ADD_SAMPLES' action can be dispatched as follows:\n *\n *    dispatch({\n *      type: 'ADD_SAMPLES',\n *      values: ['Sample3', 'Sample4']\n *    })\n *\n * which will cause the state object to be updated to:\n *\n *    [ 'Sample1', 'Sample2', 'Sample3', 'Sample4']\n *\n * These reducers can also be used with combineReducers(..):\n *\n *    const rootReducer = combineReducers({\n *        samples: createArrayReducer('SAMPLES', ['Sample1', 'Sample2']),\n *        tags: createArrayReducer('TAGS'),\n *        other: ..,\n *        ..\n *    })\n *\n * @param updateActionType (string) action.type that will later be used to update the state object.\n */\nexport const createArrayReducer = (actionTypeSuffix, initialState = [], debug = false) => {\n  const reducer = (state = initialState, action) => {\n    if (!action) {\n      return state\n    }\n\n    switch (action.type) {\n      case `SET_${actionTypeSuffix}`:\n      case `ADD_${actionTypeSuffix}`:\n      case `REMOVE_${actionTypeSuffix}`: {\n        if (!Array.isArray(action.values)) {\n          console.error(`Invalid ${action.type} action: action.values is undefined or not an array: `, action)\n          return state\n        }\n\n        let newState\n        if (action.type === `SET_${actionTypeSuffix}`) {\n          newState = [...action.values] // make a copy of action.values\n        } else if (action.type === `ADD_${actionTypeSuffix}`) {\n          newState = [...state, ...action.values]\n        } else {\n          const valuesToRemove = action.values\n          newState = state.filter((v) => !valuesToRemove.includes(v))\n        }\n\n        if (debug) {\n          console.log('createArrayReducer: applying action: ', action, 'State changing from ', state, ' to ', newState)\n        }\n        return newState\n      }\n\n      default:\n        return state\n    }\n  }\n\n  return reducer\n}\n\n/**\n * Factory function that creates a reducer for managing a state object that looks like:\n *\n * { id1: { key1: valueA, key2: valueB, key3: valueC },\n *   id2: { key1: valueI, key2: valueJ, key3: valueK },\n *   id3: ...\n * }\n *\n * This state object is analogous to a database table, where the contained objects represent table\n * rows and have identical sets of keys but different values, so that each key can be thought of as\n * a column in the table.\n *\n * This reducer supports a single action type that can be used to transform the underlying state\n * in several ways:\n *    - adding new objects by id\n *    - deleting objects by id\n *    - updating the values within one or more existing objects by id\n *\n * As an example, the reducer can be created as follows:\n *\n *      const tableRowReducer = createObjectsByIdReducer('UPDATE_TABLE_X')\n *\n * Here, the 'UPDATE_TABLE_X' argument specifies the action type that will later be dispatched\n * to perform modifications. For example, the action below will change some of the values and also\n * both delete some ids and add some new ids:\n *\n * dispatch({\n *   type: 'UPDATE_TABLE_X',\n *   updatesById: {\n *     id1: { key2: valueM },                                 // update key2 value in object with id1\n *     idNew: { key1: valueX, key2: valueY, key3: valueZ },   // add new object and id\n *     id2: null,                                             // delete id2\n *   }\n *  })\n *\n * The resulting state after this action would look like:\n *\n * { id1: { key1: valueA, key2: valueM, key3: valueC },\n *   idNew: { key1: valueX, key2: valueY, key3: valueZ },\n *   id3: ...\n * }\n *\n * @param updateStateActionId (string) action.type that will later be used to update the state object.\n */\nexport const createObjectsByIdReducer = (updateActionType, key, initialState = {}, debug = false) => {\n  const reducer = (state = initialState, action) => {\n    if (!action) {\n      return state\n    }\n\n    switch (action.type) {\n      case updateActionType: {\n        if (action.updatesById === undefined) {\n          console.error(`Invalid ${updateActionType} action. action.updatesById is undefined: `, action)\n          return state\n        }\n        let updates = action.updatesById\n        if (key) {\n          if (!(key in updates)) {\n            return state\n          }\n          updates = updates[key]\n        }\n        const shallowCopy = { ...state }\n        Object.entries(updates).forEach(([id, obj]) => {\n          if (obj == null) {\n            // if the id is mapped to a null or undefined value, then delete this id\n            delete shallowCopy[id]\n          } else if (shallowCopy[id]) {\n            shallowCopy[id] = { ...shallowCopy[id], ...obj }\n          } else {\n            shallowCopy[id] = { ...obj }\n          }\n        })\n\n        if (debug) {\n          console.log('objectsByIdReducer: applying action: ', action, 'State changing from: ', state, ' to ', shallowCopy)\n        }\n        return shallowCopy\n      }\n      default:\n        return state\n    }\n  }\n\n  return reducer\n}\n\n\n/**\n * Factory function that creates a reducer for managing a state object that looks like:\n *\n * {\n *    loading: false,\n *    error: null,\n * }\n *\n * This state object encapsulates an entity type that is fetched from the server\n *\n * This reducer supports a two action types:\n * 1) A request action that sets the state to loading\n * 2) A receive action that indicates the loading has completed\n *\n * @param requestActionType (string) action.type representing a \"request\" event\n * @param receiveActionType (string) action.type representing a \"receive\" event\n */\nexport const loadingReducer = (requestActionType, receiveActionType, initialState = { isLoading: false, errorMessage: null }, debug = false) => {\n  const reducer = (state = initialState, action) => {\n    switch (action.type) {\n      case requestActionType:\n        if (debug) {\n          console.log(`fetchObjectsReducer: applying action: ${action.type}. State changing to loading`)\n        }\n        return { ...state, isLoading: true }\n\n      case receiveActionType:\n        if (debug) {\n          console.log(`fetchObjectsReducer: applying action: ${action.type}. State changing to received: ${action.byGuid}`)\n        }\n        return { ...state, isLoading: false, errorMessage: action.error }\n\n      default:\n        return state\n    }\n  }\n  return reducer\n}\n","import { createObjectsByIdReducer } from './reducerFactories'\n\n\n// actions\nconst UPDATE_MODAL_STATE = 'UPDATE_MODAL_STATE'\n\n// action creators\nexport const openModal = (modalName) => (dispatch) => (\n  dispatch({ type: UPDATE_MODAL_STATE, updatesById: { [modalName]: { open: true } } })\n)\n\nexport const closeModal = (modalName, confirmed) => (dispatch, getState) => {\n  if (getState().modals[modalName].confirmOnClose && !confirmed) {\n    dispatch({ type: UPDATE_MODAL_STATE, updatesById: { [modalName]: { confirming: true } } })\n  } else {\n    dispatch({ type: UPDATE_MODAL_STATE, updatesById: { [modalName]: { open: false, confirming: false, confirmOnClose: null } } })\n  }\n}\n\n// root reducer\nexport default {\n  modals: createObjectsByIdReducer(UPDATE_MODAL_STATE),\n}\n\n// basic selectors\nexport const getModalOpen = (state, modalName) => state.modals[modalName] && state.modals[modalName].open\n","/* eslint-disable react/destructuring-assignment */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { Button, Modal, Icon } from 'semantic-ui-react'\n\nimport { getModalOpen, openModal, closeModal } from '../redux/utils/modalReducer'\n\nexport const ButtonLink = styled(Button).attrs({ basic: true })`\n  &.ui.button.basic {\n    white-space: nowrap;\n    border: none;\n    padding: ${(props) => props.padding || 0};\n    color: ${(props) => props.color || '#4183C4'} !important;\n    text-decoration: none;\n    font-weight: ${(props) => props.fontWeight || 'inherit'};\n    box-shadow: none !important;\n    user-select: auto;\n    \n    &:hover, &:focus, &:active {\n      color: #1e70bf !important;\n      background: transparent !important;\n    }\n    \n    &[class*=\"right labeled\"].icon {\n      padding-left: 0 !important;\n      padding-right: 2.1em !important;\n      \n      > .icon {\n        background-color: initial;\n      }\n    }\n  }\n`\n\nconst ContainerDiv = styled.div`\n  float: right;\n  padding: 0px 20px 20px 20px;\n`\n\nconst StyledButton = styled(Button)`\n  margin-left: 10px !important;\n  width: 100px;\n`\n\n\nclass CustomModal extends React.PureComponent\n{\n  handleClose = () => {\n    let doClose = true\n    if (this.props.handleClose) {\n      doClose = this.props.handleClose()\n    }\n    if (doClose) {\n      this.props.close()\n    }\n  }\n\n  handleSave = () => {\n    let doClose = true\n    if (this.props.handleSave) {\n      doClose = this.props.handleSave()\n    }\n    if (doClose) {\n      this.props.close()\n    }\n  }\n\n  render() {\n    const trigger = this.props.trigger ? React.cloneElement(this.props.trigger, { onClick: this.props.open }) : null\n    return (\n      <Modal open={this.props.isOpen} trigger={trigger} onClose={this.handleClose} size={this.props.size}>\n        <Modal.Header>\n          {this.props.title}\n          <ButtonLink floated=\"right\" onClick={this.handleClose} icon={<Icon name=\"remove\" color=\"grey\" />} />\n        </Modal.Header>\n        <Modal.Content>\n          {this.props.children}\n        </Modal.Content>\n        <ContainerDiv>\n          <StyledButton tabIndex={0} onClick={this.handleClose} type=\"button\">Cancel</StyledButton>\n          <StyledButton tabIndex={0} onClick={this.handleSave} type=\"submit\" color=\"blue\">{ this.props.handleSave ? 'Save' : 'Ok' }</StyledButton>\n        </ContainerDiv>\n      </Modal>\n    )\n  }\n}\n\nCustomModal.defaultProps = {\n  size: 'small',\n}\n\nCustomModal.propTypes = {\n  trigger: PropTypes.node,\n  title: PropTypes.string,\n  handleSave: PropTypes.func,\n  handleClose: PropTypes.func,\n  size: PropTypes.oneOf(['small', 'large', 'fullscreen']),\n  isOpen: PropTypes.bool,\n  open: PropTypes.func,\n  close: PropTypes.func,\n  children: PropTypes.node,\n}\n\n\nconst mapStateToProps = (state, ownProps) => ({\n  isOpen: getModalOpen(state, ownProps.modalName),\n})\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    open: (e) => {\n      e.preventDefault()\n      dispatch(openModal(ownProps.modalName))\n    },\n    close: () => {\n      dispatch(closeModal(ownProps.modalName, true))\n    },\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomModal)\n","/* eslint-disable react/jsx-one-expression-per-line */\n/* eslint-disable react/no-array-index-key */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { Form, TextArea } from 'semantic-ui-react'\nimport Modal from './Modal'\n\nconst LinkButton = styled.a`\n  cursor: pointer;\n`\n\nclass EditLocusListButtonAndModal extends React.PureComponent {\n\n  constructor(props) {\n    super(props)\n\n    const {\n      locusList,\n    } = this.props\n\n    this.textAreaValue = (locusList || []).join('\\n') // TextArea refs don't work - probably because its a pure component, so use this hack\n  }\n\n  render = () => {\n    const {\n      locusList,\n      name,\n      setLocusList,\n    } = this.props\n\n    const title = `Locus List - ${name}`\n\n    return (\n      <Modal\n        title={title}\n        size=\"large\"\n        modalName={title}\n        trigger={\n          <LinkButton>\n            {\n              (locusList || []).length > 0\n                ? <div><br />Edit Locus List</div>\n                : <div>Add Locus List To Side Bar</div>\n            }\n          </LinkButton>\n        }\n        handleSave={() => {\n          const newLocusList = this.textAreaValue.split(/[,\\s]+/).filter(Boolean)\n          setLocusList(newLocusList)\n\n          return true\n        }}\n      >\n        <Form>\n          <Form.Field\n            control={TextArea}\n            style={{ minHeight: '300px' }}\n            defaultValue={this.textAreaValue}\n            onKeyUp={(e) => { this.textAreaValue = e.target.value }}\n            placeholder=\"Enter genomic positions, intervals, and/or gene names separated by commas, spaces, or new lines. &#10;\n              These can be in any format recognized by the IGV search bar. &#10;\n              For example: DMD, ENST00000589830, chr1:55516888, 2:152341851-152591002\"\n          />\n        </Form>\n        <br />\n        <b><i>NOTE:</i></b> This locus list will be saved across page refreshes in this browser, &nbsp;\n        but will not be recorded in the page url like other settings.&nbsp;\n        Sharing or bookmarking this page won&apos;t include the contents of this list.\n      </Modal>)\n  }\n}\n\nEditLocusListButtonAndModal.propTypes = {\n  name: PropTypes.string,\n  locusList: PropTypes.array,\n  setLocusList: PropTypes.func,\n}\n\nconst EditLocusList = ({ name, locusList, setLocus, setLocusList }) => (\n  <div>\n    {\n      locusList.map((locus, i) => <div key={`${locus} ${i}`}>{i + 1}. &nbsp; <LinkButton onClick={() => { setLocus(locus) }}>{locus}</LinkButton></div>)\n    }\n    <EditLocusListButtonAndModal name={name} locusList={locusList} setLocusList={setLocusList} />\n  </div>)\n\n\nEditLocusList.propTypes = {\n  name: PropTypes.string,\n  locusList: PropTypes.array,\n  setLocus: PropTypes.func,\n  setLocusList: PropTypes.func,\n}\n\nexport default EditLocusList\n","/* eslint-disable react/jsx-one-expression-per-line */\n/* eslint-disable react/self-closing-comp */\n/* eslint-disable object-shorthand */\n/* eslint-disable no-else-return */\n/* eslint-disable react/no-array-index-key */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { Form, Icon, Message, Popup, TextArea } from 'semantic-ui-react'\n\nimport Modal from './Modal'\n\nconst LinkButton = styled.a`\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n`\n\nconst ExampleDiv = styled.div`\n  font-family: monospace;\n  margin: 20px 30px;\n  padding: 10px;\n  background-color: #F7F7F7;\n  white-space: nowrap;\n`\n\nconst ExamplePath = styled.span`\n  font-family: monospace;\n  background-color: #F7F7F7;\n`\n\nconst StyledPopup = styled(Popup).attrs({ position: 'right center' })`\n`\n\nexport const SUPPORTED_FILE_EXTENSIONS = {\n  '.bigWig': 'coverage',\n  '.bw': 'coverage',\n  '.junctions.bed': 'junctions',\n  '.spliceJunctions.bed': 'junctions',\n  '.junctions.bed.gz': 'junctions',\n  '.spliceJunctions.bed.gz': 'junctions',\n\n  '.bam': 'bam',\n  '.cram': 'bam',\n\n  '.vcf': 'vcf',\n  '.vcf.gz': 'vcf',\n\n  '.wig': 'wig',\n  '.bedGraph': 'wig',\n\n  '.bed': 'annotation',\n  '.bed.gz': 'annotation',\n  '.gff3': 'annotation',\n  '.gtf': 'annotation',\n  '.gtf.gz': 'annotation',\n  '.genePred': 'annotation',\n  '.bigBed': 'annotation',\n}\n\n\nclass AddRowsButtonAndModal extends React.PureComponent {\n\n  getInitialState = () => {\n    return {\n      textAreaValue: '',\n      warningMessage: null,\n      errorMessage: null,\n    }\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = this.getInitialState()\n  }\n\n  parseTextAreaValueToRows = (textAreaValue) => {\n    if (!textAreaValue.trim()) {\n      return { rows: [], errorMessage: null }\n    }\n\n    let errorMessage = null\n    const invalidPaths = []\n    const dataPaths = textAreaValue.split(/[,\\s]+/).filter(Boolean)\n\n    const newRowsByRowName = dataPaths.reduce((acc, dataPath) => {\n      const pathTokens = dataPath.split('/')\n      const fileName = pathTokens[pathTokens.length - 1]\n      const matchingExtensions = Object.keys(SUPPORTED_FILE_EXTENSIONS).filter((ext) => fileName.endsWith(ext))\n      if (matchingExtensions.length === 0) {\n        invalidPaths.push(dataPath)\n      } else {\n        const ext = matchingExtensions[0]\n        const filePrefix = fileName.replace(ext, '')\n        if (!acc[filePrefix]) {\n          acc[filePrefix] = { data: [] }\n        }\n\n        acc[filePrefix].name = filePrefix\n        acc[filePrefix].data.push(\n          { type: SUPPORTED_FILE_EXTENSIONS[ext], url: dataPath },\n        )\n      }\n      return acc\n    }, {})\n\n    if (invalidPaths.length > 0) {\n      errorMessage = `These paths have file suffixes that are not recognized: ${invalidPaths.join(', ')}`\n    }\n\n    return { newRows: Object.values(newRowsByRowName), errorMessage }\n  }\n\n  handleModalSave = () => {\n    const {\n      addRows,\n    } = this.props\n\n    const {\n      textAreaValue,\n    } = this.state\n\n    const { newRows, errorMessage } = this.parseTextAreaValueToRows(textAreaValue)\n    if (errorMessage) {\n      this.setState({ errorMessage: errorMessage })\n      return false\n    } else {\n      addRows(newRows)\n      return true\n    }\n  }\n\n  handleModalClose = () => {\n    this.setState(this.getInitialState())\n    return true\n  }\n\n  render = () => {\n    const {\n      title,\n      trigger,\n    } = this.props\n\n    const {\n      textAreaValue,\n      warningMessage,\n      errorMessage,\n    } = this.state\n\n    const fullTitle = `${title} Rows`\n\n    return (\n      <Modal\n        title={fullTitle}\n        size=\"large\"\n        modalName={fullTitle}\n        trigger={trigger}\n        handleSave={this.handleModalSave}\n        handleClose={this.handleModalClose}\n      >\n        <div>\n          Enter google bucket path(s) for data files: &nbsp;\n          <StyledPopup trigger={<Icon style={{ margin: '10px 0px' }} name=\"question circle outline\" />} content={\n            <div>\n              <b>Format</b>:<br />\n              <br />\n              Enter a list of data file paths separated by commas, spaces or new lines. <br />\n              <br />\n              Example:<br />\n              <ExampleDiv>\n                gs://your-bucket/dir/sample-name1.bigWig <br />\n                gs://your-bucket/dir/sample2.bigWig <br />\n                gs://your-bucket/dir/sample-name1.junctions.bed.gz <br />\n                gs://your-bucket/dir/sample-name1.bam <br />\n                gs://your-bucket/dir/sample2.junctions.bed.gz <br />\n              </ExampleDiv>\n              Paths that have the same prefix (eg. <ExamplePath>gs://your-bucket/dir/sample-name1</ExamplePath> above) will be interpreted as different data types for same sample.<br />\n              The order of paths doesn&apos;t matter.<br />\n              <br />\n              IGV.js track types will be inferred from file extensions as follows:<br />\n              <div style={{ margin: '10px 30px' }}>\n                <table>\n                  <tbody>\n                    <tr><td> <b> File Extension </b> </td><td> <b>IGV.js Track Type</b> </td></tr>\n                    {Object.entries(SUPPORTED_FILE_EXTENSIONS).filter(([ext]) => !ext.endsWith('.bed')).map(\n                      ([ext, fileType], i) => <tr key={`${ext} ${fileType} ${i}`}><td>{ext}</td><td>{fileType}</td></tr>,\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          }\n          />\n          <br />\n        </div>\n        <Form>\n          <TextArea\n            style={{ minHeight: '300px' }}\n            value={textAreaValue}\n            onChange={(e) => {\n              this.setState({ textAreaValue: e.target.value })\n            }}\n            placeholder=\"Enter file path(s)\"\n          >\n          </TextArea>\n        </Form>\n\n        <br />\n        <b><i>NOTE:</i></b> These paths will be saved across page refreshes in this browser, but will not be recorded in the page url like other settings. Sharing or bookmarking this page won&apos;t include these paths.\n        {\n          warningMessage && (\n          <Message color=\"yellow\">\n            {warningMessage}\n          </Message>)\n        }\n        {\n          errorMessage && (\n          <Message color=\"red\">\n            {errorMessage}\n          </Message>)\n        }\n      </Modal>)\n  }\n}\n\nAddRowsButtonAndModal.propTypes = {\n  title: PropTypes.string,\n  addRows: PropTypes.func,\n  trigger: PropTypes.node,\n}\n\n\nconst AddRows = ({ category, addRows }) => (\n  <div>\n    <AddRowsButtonAndModal\n      title={`Add ${category.categoryName}`}\n      categoryName={category.categoryName}\n      addRows={(rows) => addRows(category.categoryName, rows)}\n      trigger={<LinkButton>Add {category.rows.length === 0 ? category.categoryName : null} Rows</LinkButton>}\n    />\n  </div>)\n\n\nAddRows.propTypes = {\n  category: PropTypes.object,\n  addRows: PropTypes.func,\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  addRows: (categoryName, rows) => {\n    dispatch({\n      type: 'ADD_ROWS',\n      categoryName: categoryName,\n      rows: rows,\n    })\n  },\n})\n\nexport default connect(null, mapDispatchToProps)(AddRows)\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/require-optimization */\n\nimport _ from 'lodash'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { Search } from 'semantic-ui-react'\nimport { CategoryH3 } from './SideBarUtils'\nimport {\n  getRowsInCategories,\n  getSelectedRowNamesByCategoryName,\n  getSelectedSamplesByCategoryNameAndRowName,\n} from '../redux/selectors'\n\nconst SearchPanelContainer = styled.div`\n  margin: 5px 0px;\n`\n\nconst StyledSearch = styled(Search)`\n  margin: 13px 0px; \n  .prompt {\n    border-radius: 2px !important;\n    width: 155px;\n  }\n  \n  input {\n      max-width: none !important;\n      padding: 5px !important;\n  }\n  \n  .input {\n    -webkit-box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n    -moz-box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n    box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n  }\n  \n  .results {\n      min-width: max-content;\n  }\n\n  .red-text {\n    .title {\n      color: #CC0000 !important;\n      font-weight: 500 !important;\n     }\n  }\n`\n\nconst MAX_AUTOCOMPLETE_RESULTS = 12\nconst INITIAL_STATE = { isLoading: false, results: [], value: '' }\n\nclass SearchRows extends React.Component {\n\n  constructor() {\n    super()\n    this.state = INITIAL_STATE\n  }\n\n  handleResultSelect = (e, { result }) => {\n    this.setState({ value: '' })\n\n    const idTokens = result.id.split('!!')\n    const action = idTokens[0]\n    const categoryName = idTokens[1]\n    const rowName = idTokens[2]\n    const sampleName = idTokens[3]\n\n    if (sampleName) {\n      if (action === 'ADD') {\n        this.props.updateSelectedRowNames(action, categoryName, [rowName])\n      } else if (this.getSelectedSamplesForRow(categoryName, rowName).length <= 1) {\n        this.props.updateSelectedRowNames(action, categoryName, [rowName])\n      }\n      this.props.updateSelectedSamples(action, categoryName, { [rowName]: [sampleName] })\n    } else {\n      this.props.updateSelectedRowNames(action, categoryName, [rowName])\n    }\n  }\n\n  getSelectedRowNames = (categoryName) => (this.props.selectedRowNamesByCategoryName[categoryName] || [])\n\n  isRowSelected = (categoryName, rowName) => this.getSelectedRowNames(categoryName).includes(rowName)\n\n  getSelectedSamplesByRowName = (categoryName) => ((this.props.selectedSamplesByCategoryNameAndRowName[categoryName] || {}).selectedSamples || {})\n\n  getSelectedSamplesForRow = (categoryName, rowName) => (this.getSelectedSamplesByRowName(categoryName)[rowName] || [])\n\n  isSampleSelected = (categoryName, rowName, sample) => this.getSelectedSamplesForRow(categoryName, rowName).includes(sample)\n\n  addRowsToHide = (resultsByCategoryName, resultsCounter) => {\n    Object.keys(this.props.selectedRowNamesByCategoryName).forEach((categoryName) => {\n      if (resultsCounter >= MAX_AUTOCOMPLETE_RESULTS) return\n      this.props.selectedRowNamesByCategoryName[categoryName].forEach((rowName) => {\n        if (resultsCounter >= MAX_AUTOCOMPLETE_RESULTS) return\n        resultsByCategoryName[categoryName] = resultsByCategoryName[categoryName] || []\n        const newResult = { action: 'REMOVE', categoryName, rowName }\n        if (!_.some(resultsByCategoryName[categoryName], newResult)) {\n          resultsByCategoryName[categoryName].push(newResult)\n          resultsCounter += 1\n        }\n      })\n    })\n\n    return resultsCounter\n  }\n\n  addSamplesToHide = (resultsByCategoryName, resultsCounter) => {\n    Object.keys(this.props.selectedSamplesByCategoryNameAndRowName).forEach((categoryName) => {\n      if (resultsCounter >= MAX_AUTOCOMPLETE_RESULTS) return\n      Object.keys(this.getSelectedSamplesByRowName(categoryName)).forEach((rowName) => {\n        if (resultsCounter >= MAX_AUTOCOMPLETE_RESULTS || !this.isRowSelected(categoryName, rowName)) return\n        this.getSelectedSamplesForRow(categoryName, rowName).forEach((sample) => {\n          if (resultsCounter >= MAX_AUTOCOMPLETE_RESULTS) return\n          resultsByCategoryName[categoryName] = resultsByCategoryName[categoryName] || []\n          const newResult = { action: 'REMOVE', categoryName, rowName, sample }\n          if (!_.some(resultsByCategoryName[categoryName], newResult)) {\n            resultsByCategoryName[categoryName].push(newResult)\n            resultsCounter += 1\n          }\n        })\n      })\n    })\n\n    return resultsCounter\n  }\n\n  addMatchingSamplesFromRow = (categoryName, row, inputStringRegExp, resultsByCategoryName, resultsCounter) => {\n    if (!row.data) {\n      return resultsCounter\n    }\n\n    const dataItemsWithSamples = row.data.filter((data) => data.samples && data.samples.length > 0)\n    if (dataItemsWithSamples.length > 1) {\n      console.warn('Found row with multiple data items each of which has a samples array. This may behave unexpectedly if there are duplicate samples')\n    }\n\n    //add samples with matching names\n    dataItemsWithSamples.forEach((data) => {\n      (data.samples || []).forEach((sample) => {\n        if (resultsCounter >= MAX_AUTOCOMPLETE_RESULTS) return\n        if (inputStringRegExp.test(sample)) {\n          resultsByCategoryName[categoryName] = resultsByCategoryName[categoryName] || []\n          const newResult = {\n            action: this.isRowSelected(categoryName, row.name) && this.isSampleSelected(categoryName, row.name, sample) ? 'REMOVE' : 'ADD',\n            categoryName,\n            rowName: row.name,\n            sample,\n          }\n          if (!_.some(resultsByCategoryName[categoryName], newResult)) {\n            resultsByCategoryName[categoryName].push(newResult)\n            resultsCounter += 1\n          }\n        }\n      })\n    })\n\n    return resultsCounter\n  }\n\n  addMatchingRowsAndSamples = (inputStringRegExp, resultsByCategoryName, resultsCounter) => {\n    const matchingRowsByCategoryName = {} //used later to add samples from this row\n    this.props.rowsInCategories.forEach((category) => {\n      if (resultsCounter >= MAX_AUTOCOMPLETE_RESULTS) return\n      const { categoryName } = category\n      category.rows.forEach((row) => {\n        if (resultsCounter >= MAX_AUTOCOMPLETE_RESULTS) return\n        //add rows with matching names\n        if (inputStringRegExp.test(row.name)) {\n          matchingRowsByCategoryName[categoryName] = matchingRowsByCategoryName[categoryName] || []\n          matchingRowsByCategoryName[categoryName].push(row)\n\n          resultsByCategoryName[categoryName] = resultsByCategoryName[categoryName] || []\n          const newResult = {\n            action: this.isRowSelected(categoryName, row.name) ? 'REMOVE' : 'ADD',\n            categoryName,\n            rowName: row.name,\n          }\n          if (!_.some(resultsByCategoryName[categoryName], newResult)) { //avoid duplicates\n            resultsByCategoryName[categoryName].push(newResult)\n            resultsCounter += 1\n          }\n        }\n\n        resultsCounter = this.addMatchingSamplesFromRow(categoryName, row, inputStringRegExp, resultsByCategoryName, resultsCounter)\n\n      })\n    })\n\n    Object.entries(matchingRowsByCategoryName).forEach(([categoryName, rows]) => {\n      if (resultsCounter >= MAX_AUTOCOMPLETE_RESULTS) return\n      resultsByCategoryName[categoryName] = resultsByCategoryName[categoryName] || []\n      rows.forEach((row) => {\n        if (resultsCounter >= MAX_AUTOCOMPLETE_RESULTS) return\n        resultsCounter = this.addMatchingSamplesFromRow(categoryName, row, /.*/, resultsByCategoryName, resultsCounter)\n      })\n    })\n\n    return resultsCounter\n  }\n\n  handleSearchChange = (e, { value }) => {\n    this.setState({ isLoading: true, value })\n\n    setTimeout(() => {\n      if (this.state.value.length < 1) {\n        return this.setState(INITIAL_STATE)\n      }\n\n      const inputStringRegExp = new RegExp(_.escapeRegExp(this.state.value), 'i')\n\n      const resultsByCategoryName = {}\n      let resultsCounter = 0\n\n      // search actions\n      if (inputStringRegExp.test('Hide')) {\n        resultsCounter = this.addRowsToHide(resultsByCategoryName, resultsCounter)\n      }\n\n      if (inputStringRegExp.test('Hide') || inputStringRegExp.test('Hide sample')) {\n        // hide samples\n        resultsCounter = this.addSamplesToHide(resultsByCategoryName, resultsCounter)\n      }\n\n      // search rows\n      this.addMatchingRowsAndSamples(inputStringRegExp, resultsByCategoryName, resultsCounter)\n\n      const useCategories = this.props.rowsInCategories.length > 1\n      const results = useCategories ? {} : []\n      Object.keys(resultsByCategoryName).forEach((categoryName) => {\n        if (useCategories) {\n          results[categoryName] = { name: categoryName, results: [] }\n        }\n        const resultsArray = useCategories ? results[categoryName].results : results\n        resultsByCategoryName[categoryName].forEach((item) => {\n          if (item.sample) {\n            const actionLabel = item.action === 'ADD' ? 'Show sample' : 'Hide sample'\n            resultsArray.push({\n              id: `${item.action}!!${categoryName}!!${item.rowName}!!${item.sample}`,\n              title: `${actionLabel} ${item.rowName} > ${item.sample}`,\n              className: item.action !== 'ADD' && 'red-text',\n            })\n          } else {\n            const actionLabel = item.action === 'ADD' ? 'Show' : 'Hide'\n            resultsArray.push({\n              id: `${item.action}!!${categoryName}!!${item.rowName}`,\n              title: `${actionLabel} ${item.rowName}`,\n              className: item.action !== 'ADD' && 'red-text',\n            })\n          }\n        })\n      })\n\n      return this.setState({\n        isLoading: false,\n        results,\n      })\n    }, 1)\n  }\n\n  render = () => {\n    const { isLoading, value, results } = this.state\n\n    return (\n      <SearchPanelContainer>\n        <CategoryH3>Select Data</CategoryH3>\n        <StyledSearch\n          category={this.props.rowsInCategories.length > 1}\n          loading={isLoading}\n          onResultSelect={this.handleResultSelect}\n          onSearchChange={this.handleSearchChange}\n          placeholder=\"Select data\"\n          results={results}\n          value={value}\n        />\n      </SearchPanelContainer>)\n  }\n}\n\nSearchRows.propTypes = {\n  rowsInCategories: PropTypes.array,\n  selectedRowNamesByCategoryName: PropTypes.object,\n  selectedSamplesByCategoryNameAndRowName: PropTypes.object,\n  updateSelectedRowNames: PropTypes.func,\n  updateSelectedSamples: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  rowsInCategories: getRowsInCategories(state),\n  selectedRowNamesByCategoryName: getSelectedRowNamesByCategoryName(state),\n  selectedSamplesByCategoryNameAndRowName: getSelectedSamplesByCategoryNameAndRowName(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateSelectedRowNames: (actionType, categoryName, selectedRowNames) => {\n    dispatch({\n      type: `${actionType}_SELECTED_ROW_NAMES`,\n      categoryName,\n      selectedRowNames,\n    })\n  },\n\n  updateSelectedSamples: (actionType, categoryName, selectedSamplesByRowName) => {\n    dispatch({\n      type: `${actionType}_SELECTED_SAMPLES`,\n      categoryName,\n      selectedSamplesByRowName,\n    })\n  },\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchRows)\n","/* eslint-disable react/jsx-one-expression-per-line */\n/* eslint-disable implicit-arrow-linebreak */\n/* eslint-disable react/no-array-index-key */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { Checkbox, Icon, Popup } from 'semantic-ui-react'\nimport { CategoryH3, OptionDiv, OptionInputDiv, StyledPopup } from './SideBarUtils'\nimport SelectedDataPanel from './SelectedDataPanel'\nimport EditLocusList from './EditLocusList'\nimport AddRows from './AddRows'\nimport SearchRows from './SearchRows'\nimport {\n  getLeftSideBarLocusList,\n  getRowsInCategories,\n  getDataTypesUsersCanToggle,\n  getEnabledDataTypes,\n  getSelectedRowNamesByCategoryName,\n} from '../redux/selectors'\n\nconst CategoryDetails = styled.div`\n  display: inline-block;\n  margin: 0px 0px 0px 15px;\n  color: #999;\n  white-space: nowrap;\n`\n\nconst DataTypeIcon = styled.div.attrs({ name: 'stop' })`\n  color: ${(props) => props.color};\n  border: 3px solid ${(props) => props.color};\n  display: inline-block;\n  width: 6px;\n  border-radius: 1px;\n  height: 10px;\n  cursor: pointer;\n`\n\nconst dataTypeIconColors = {\n  junctions: '#B0B0EC',\n  coverage: '#B5D29A',\n  alignment: '#5DB6E9',\n  vcf: '#E6A01B',\n  gcnv_bed: '#AA3333',\n  default: '#000000',\n}\n\nconst dataTypeLabels = {\n  coverage: 'Coverage',\n  junctions: 'Splice Junctions',\n  vcf: 'Variants (VCF)',\n  gcnv_bed: 'gCNV',\n  alignment: 'Reads (BAM)',\n  bed: 'Annotations (BED)',\n  gff3: 'Annotations (GFF3)',\n  gtf: 'Annotations (GTF)',\n  genePred: 'Annotations (genePred)',\n  bigBed: 'Annotations (bigBed)',\n}\n\nconst LinkButton = styled.a`\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n`\n\nconst RowColorLabelsContainer = styled.span`\n  padding-left: 5px;\n  white-space: nowrap;\n`\n\nconst NoWrapDiv = styled.div`\n  white-space: nowrap;\n`\n\n/*\nconst SelectedDataSectionHeading = styled.div`\n  font-weight: 700;\n  margin: 8px 0px;\n`\n*/\n\nconst ShowTrackTypesPanel = ({ dataTypesUsersCanToggle, enabledDataTypes, updateDataTypesToShow }) => {\n  if (dataTypesUsersCanToggle.length < 2) {\n    return null\n  }\n  const checkBoxes = [...dataTypesUsersCanToggle].map((dataType, i) => {\n    const label = dataTypeLabels[dataType] || (dataType.charAt(0).toUpperCase() + dataType.slice(1)) //to Title case\n    return (\n      <OptionDiv key={`${dataType} ${i}`}>\n        <Checkbox label={`${label.toLocaleString()}`} checked={enabledDataTypes.includes(dataType)} onChange={(e, data) => updateDataTypesToShow(data.checked ? 'ADD' : 'REMOVE', [dataType])} />\n        <RowColorLabelsContainer><Popup content={`This stripe marks rows that have ${label.toLowerCase()} data. Use the checkbox on the left to show or hide ${label.toLowerCase()} tracks for all rows selected below.`} position=\"right center\" trigger={<DataTypeIcon color={dataTypeIconColors[dataType] || dataTypeIconColors.default} />} /></RowColorLabelsContainer>\n      </OptionDiv>)\n  })\n\n  return (\n    <div>\n      <CategoryH3>Show Track Types</CategoryH3>\n      {checkBoxes}\n    </div>)\n}\n\nShowTrackTypesPanel.propTypes = {\n  dataTypesUsersCanToggle: PropTypes.array,\n  enabledDataTypes: PropTypes.array,\n  updateDataTypesToShow: PropTypes.func,\n}\n\n\nconst RowColorLabelsWithPopup = ({ row }) => {\n  const handleCopyToClipboard = () => {\n    const s = (row.data || []).map((d) => d.url).join('\\n')\n    navigator.clipboard.writeText(s)\n  }\n\n  return (<Popup\n    flowing\n    content={\n      <table>\n        <tbody>\n          {\n            (row.data || []).map((d, i) =>\n              <tr key={`${d.url} ${d.type} ${i}`}>\n                <td style={{ paddingRight: '10px' }}>\n                  <b>{d.type && (dataTypeLabels[d.type] || d.type.toUpperCase())}:</b>\n                </td>\n                <td>\n                  <NoWrapDiv>{d.url}</NoWrapDiv>\n                </td>\n                <td style={{ color: 'gray', whiteSpace: 'nowrap', paddingLeft: '15px' }}>\n                  {d.samples ? `(${d.samples.length} samples)` : null}\n                </td>\n              </tr>,\n            )\n          }\n          <tr><td colSpan={2}><div style={{ fontSize: 'small', color: 'grey', marginTop: '10px' }}>(click to copy paths)</div></td></tr>\n        </tbody>\n      </table>\n    }\n    position=\"right center\"\n    trigger={\n      <RowColorLabelsContainer onClick={handleCopyToClipboard}>\n        {\n          (row.data || []).map((d, i) => <DataTypeIcon key={`${d.url} ${d.type} ${i}`} color={dataTypeIconColors[d.type] || dataTypeIconColors.default} />)\n        }\n      </RowColorLabelsContainer>\n    }\n    style={{ marginLeft: '2px' }}\n  />)\n}\n\nRowColorLabelsWithPopup.propTypes = {\n  row: PropTypes.object,\n}\n\nconst CategoryPanel = ({ category, updateSelectedRowNames }) => (\n  <div>\n    <CategoryH3>{category.categoryName}</CategoryH3>\n    {\n      category.rows.length >= 12 && <CategoryDetails>{`(N=${category.rows.length}) `}</CategoryDetails>\n    }\n    {\n      category.rows.length > 0 && (\n      <div>\n        <LinkButton onClick={\n          (e) => {\n            e.preventDefault()\n            updateSelectedRowNames('SET', category.categoryName, [])\n          }\n        }\n        >\n          Uncheck All\n        </LinkButton>\n      </div>)\n    }\n  </div>)\n\nCategoryPanel.propTypes = {\n  category: PropTypes.object,\n  updateSelectedRowNames: PropTypes.func,\n}\n\nconst RowsPanel = ({ rowsInCategories, selectedRowNamesByCategoryName, updateSelectedRowNames }) => (\n  rowsInCategories.map((category, i) => (\n    <div key={`${category.categoryName} ${i}`}>\n      <CategoryPanel category={category} updateSelectedRowNames={updateSelectedRowNames} />\n      {\n        category.rows.map((row, j) => {\n          const selectedRowNames = selectedRowNamesByCategoryName[category.categoryName] || []\n          return <RowPanel key={`${row.name} ${j}`} row={row} categoryName={category.categoryName} selectedRowNames={selectedRowNames} updateSelectedRowNames={updateSelectedRowNames} />\n        })\n      }\n      <AddRows category={category} />\n    </div>),\n  ))\n\nRowsPanel.propTypes = {\n  rowsInCategories: PropTypes.array,\n  selectedRowNamesByCategoryName: PropTypes.object,\n  updateSelectedRowNames: PropTypes.func,\n}\n\n\nconst RowPanel = ({ row, categoryName, selectedRowNames, updateSelectedRowNames }) => (\n  <NoWrapDiv>\n    <Checkbox\n      label={row.name}\n      checked={selectedRowNames.includes(row.name)}\n      data-row={row.name}\n      onChange={(e, data) => updateSelectedRowNames(data.checked ? 'ADD' : 'REMOVE', categoryName, [data['data-row']])}\n    />\n    <RowDetails row={row} />\n    <RowColorLabelsWithPopup row={row} />\n  </NoWrapDiv>)\n\nRowPanel.propTypes = {\n  row: PropTypes.object,\n  categoryName: PropTypes.string,\n  selectedRowNames: PropTypes.array,\n  updateSelectedRowNames: PropTypes.func,\n}\n/*\nconst DataSubrows = ({ data }) => {\n  if (!data) {\n    return null\n  }\n\n  const items = []\n  data.filter((d) => d.type === 'gcnv_bed' && d.samples).forEach((d) => {\n    d.samples.forEach((sample) => {\n      items.push(<Checkbox\n        key={sample}\n        label={sample}\n        checked={false}\n        onChange={(e, _) => console.log(e, _)}\n      />)\n    })\n  })\n\n  return items\n}\n\nDataSubrows.propTypes = {\n  data: PropTypes.array,\n}\n*/\n\nconst RowDetails = ({ row }) => {\n  return (\n    row.description\n      ? <StyledPopup\n        flowing\n        content={<div dangerouslySetInnerHTML={{ __html: row.description }} />}\n        position=\"right center\"\n        trigger={\n          <Icon style={{ marginLeft: '10px' }} name=\"question circle outline\" />\n        }\n      />\n      : null)\n}\n\nRowDetails.propTypes = {\n  row: PropTypes.object,\n}\n\nclass LeftSideBar extends React.PureComponent\n{\n  render() {\n    //const params = new URLSearchParams(window.location.search)\n    const {\n      locusList,\n      rowsInCategories,\n      dataTypesUsersCanToggle,\n      enabledDataTypes,\n      selectedRowNamesByCategoryName,\n      setLocus,\n      setLocusList,\n      updateDataTypesToShow,\n      updateSelectedRowNames,\n    } = this.props\n\n    return (\n      <div>\n        <EditLocusList name=\"Left Side Bar\" locusList={locusList} setLocus={setLocus} setLocusList={setLocusList} />\n        <ShowTrackTypesPanel\n          dataTypesUsersCanToggle={dataTypesUsersCanToggle}\n          enabledDataTypes={enabledDataTypes}\n          updateDataTypesToShow={updateDataTypesToShow}\n        />\n        <SearchRows />\n        <OptionInputDiv>\n          {/*<SelectedDataSectionHeading>Selected data:</SelectedDataSectionHeading>*/}\n          <SelectedDataPanel />\n        </OptionInputDiv>\n        <RowsPanel\n          rowsInCategories={rowsInCategories}\n          selectedRowNamesByCategoryName={selectedRowNamesByCategoryName}\n          updateSelectedRowNames={updateSelectedRowNames}\n        />\n      </div>)\n  }\n}\n\nLeftSideBar.propTypes = {\n  locusList: PropTypes.array,\n  rowsInCategories: PropTypes.array,\n  dataTypesUsersCanToggle: PropTypes.array,\n  enabledDataTypes: PropTypes.array,\n  selectedRowNamesByCategoryName: PropTypes.object,\n  setLocus: PropTypes.func,\n  setLocusList: PropTypes.func,\n  updateDataTypesToShow: PropTypes.func,\n  updateSelectedRowNames: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  locusList: getLeftSideBarLocusList(state),\n  rowsInCategories: getRowsInCategories(state),\n  dataTypesUsersCanToggle: getDataTypesUsersCanToggle(state),\n  enabledDataTypes: getEnabledDataTypes(state),\n  selectedRowNamesByCategoryName: getSelectedRowNamesByCategoryName(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  setLocus: (locus) => {\n    dispatch({\n      type: 'UPDATE_LOCUS',\n      newValue: locus,\n    })\n  },\n  setLocusList: (locusList) => {\n    dispatch({\n      type: 'SET_LEFT_SIDE_BAR_LOCUS_LIST',\n      values: locusList,\n    })\n  },\n  updateDataTypesToShow: (actionType, dataTypes) => {\n    dispatch({\n      type: `${actionType}_DATA_TYPES_TO_SHOW`,\n      values: dataTypes,\n    })\n  },\n  updateSelectedRowNames: (actionType, categoryName, selectedRowNames) => {\n    dispatch({\n      type: `${actionType}_SELECTED_ROW_NAMES`,\n      categoryName,\n      selectedRowNames,\n    })\n  },\n  updateSjOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_SJ_OPTIONS',\n      updates: newSettings,\n    })\n  },\n  updateVcfOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_VCF_OPTIONS',\n      updates: newSettings,\n    })\n  },\n  updateBamOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_BAM_OPTIONS',\n      updates: newSettings,\n    })\n  },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeftSideBar)\n","/* eslint-disable react/jsx-one-expression-per-line */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Button, Checkbox } from 'semantic-ui-react'\nimport { CategoryH3, OptionDiv, OptionInputDiv, OptionInput } from '../SideBarUtils'\nimport { getBamOptions } from '../../redux/selectors'\n\nconst editedFields = {}\n\nconst BamOptionsPanel = ({ bamOptions, updateBamOptions }) => {\n  const handleTextInput = (e, name, value = null) => {\n    if (e.keyCode === 13) {\n      updateBamOptions({ ...bamOptions, ...editedFields })\n    } else {\n      editedFields[name] = value\n    }\n  }\n\n  const handleApplyButton = () => {\n    updateBamOptions({ ...bamOptions, ...editedFields })\n  }\n\n  return (\n    <div>\n      <CategoryH3>BAM Track <br />Options</CategoryH3><br />\n      <OptionDiv><Checkbox label=\"View as pairs\" checked={bamOptions.viewAsPairs} onChange={(e, data) => updateBamOptions({ viewAsPairs: data.checked })} /></OptionDiv>\n      <OptionDiv><Checkbox label=\"Show soft-clips\" checked={bamOptions.showSoftClips} onChange={(e, data) => updateBamOptions({ showSoftClips: data.checked })} /></OptionDiv>\n      <OptionDiv>\n        Color by:\n        <select value={bamOptions.colorBy} onChange={(e) => updateBamOptions({ colorBy: e.target.value })}>\n          <option value=\"strand\">Strand</option>\n          <option value=\"firstOfPairStrand\">First-of-pair strand</option>\n          <option value=\"pairOrientation\">Pair orientation</option>\n          <option value=\"fragmentLength\">Insert size (TLEN)</option>\n          <option value=\"none\">None</option>\n        </select>\n      </OptionDiv>\n      <OptionInputDiv>Track height: <OptionInput key={`track-height-${bamOptions.trackHeight}`} type=\"text\" defaultValue={bamOptions.trackHeight} onKeyUp={(e) => handleTextInput(e, 'trackHeight', parseInt(e.target.value, 10))} /> px</OptionInputDiv>\n      <OptionInputDiv><Button compact size=\"small\" onClick={handleApplyButton}>Apply</Button></OptionInputDiv>\n    </div>)\n}\n\nBamOptionsPanel.propTypes = {\n  bamOptions: PropTypes.object,\n  updateBamOptions: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  bamOptions: getBamOptions(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateBamOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_BAM_OPTIONS',\n      updates: newSettings,\n    })\n  },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BamOptionsPanel)\n","/* eslint-disable react/jsx-one-expression-per-line */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { CategoryH3, OptionDiv } from '../SideBarUtils'\nimport { getVcfOptions } from '../../redux/selectors'\n\nconst VcfOptionsPanel = ({ vcfOptions, updateVcfOptions }) => {\n  return (\n    <div>\n      <CategoryH3>VCF Track <br />Options</CategoryH3><br />\n      <OptionDiv>\n        Display mode: &nbsp;\n        <select value={vcfOptions.displayMode} onChange={(e) => updateVcfOptions({ displayMode: e.target.value })}>\n          <option value=\"COLLAPSED\">Collapse</option>\n          <option value=\"SQUISHED\">Squish</option>\n          <option value=\"EXPANDED\">Expand</option>\n        </select>\n      </OptionDiv>\n    </div>)\n}\n\nVcfOptionsPanel.propTypes = {\n  vcfOptions: PropTypes.object,\n  updateVcfOptions: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  vcfOptions: getVcfOptions(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateVcfOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_VCF_OPTIONS',\n      updates: newSettings,\n    })\n  },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VcfOptionsPanel)\n","/* eslint-disable react/jsx-one-expression-per-line */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { Button, Checkbox, Icon, Radio } from 'semantic-ui-react'\nimport { CategoryH3, ColorLegendIcon, OptionDiv, OptionInputDiv, OptionInput, StyledPopup } from '../SideBarUtils'\nimport { SJ_MOTIFS, SJ_DEFAULT_COLOR_BY_NUM_READS_THRESHOLD } from '../../constants'\nimport { getSjOptions } from '../../redux/selectors'\n\n\nconst StyledRadio = styled(Radio)`\n  label {\n    margin-left: 10px;\n    margin-bottom: 10px;\n    padding-left: 1.4em !important;\n  }\n`\n\nconst ColorByLegend = ({ sjOptions, handleTextInput }) => {\n  if (sjOptions.colorBy === 'strand') {\n    return (\n      <div>\n        <ColorLegendIcon name=\"stop\" style={{ color: '#b0b0ec' }} /> plus\n        <ColorLegendIcon name=\"stop\" style={{ color: '#ecb0b0', marginLeft: '10px' }} /> minus\n      </div>)\n  }\n\n  if (sjOptions.colorBy === 'motif') {\n    // IGV.js Dark2 color palette\n    return (\n      <div>\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(27,158,119)' }} /> GT/AG <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(217,95,2)' }} /> CT/AC <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(117,112,179)' }} /> GC/AG <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(231,41,138)' }} /> CT/GC <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(102,166,30)' }} /> AT/AC <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(230,171,2)' }} /> GT/AT <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(166,118,29)' }} /> non-canonical <br />\n      </div>)\n  }\n\n  if (sjOptions.colorBy === 'numUniqueReads' || sjOptions.colorBy === 'numReads') {\n    return (\n      <div>\n        # reads<ColorLegendIcon name=\"stop\" style={{ color: '#AAAAAA', marginLeft: '10px' }} />\n        &nbsp; &nbsp;\n        <OptionInput\n          type=\"text\"\n          key={`num-reads-${sjOptions.colorByNumReadsThreshold}`}\n          defaultValue={sjOptions.colorByNumReadsThreshold !== undefined ? sjOptions.colorByNumReadsThreshold : SJ_DEFAULT_COLOR_BY_NUM_READS_THRESHOLD}\n          onKeyUp={(e) => handleTextInput(e, 'colorByNumReadsThreshold')}\n          style={{ width: '35px' }}\n        />\n        &nbsp; &lt; &nbsp;\n        <ColorLegendIcon name=\"stop\" style={{ color: 'blue' }} />\n      </div>)\n  }\n  if (sjOptions.colorBy === 'isAnnotatedJunction') {\n    return (\n      <div>\n        <ColorLegendIcon name=\"stop\" style={{ color: '#b0b0ec' }} /> known junction <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'orange' }} /> novel junction\n      </div>)\n  }\n\n  return <div />\n}\n\nColorByLegend.propTypes = {\n  sjOptions: PropTypes.object,\n  handleTextInput: PropTypes.func,\n}\n\nconst editedFields = {}\n\nconst SpliceJunctionsOptionsPanel = ({ sjOptions, updateSjOptions }) => {\n  const handleTextInput = (e, name, value = null) => {\n    if (e.keyCode === 13) {\n      updateSjOptions({ ...sjOptions, ...editedFields })\n    } else {\n      editedFields[name] = value\n    }\n  }\n  const handleApplyButton = () => {\n    updateSjOptions({ ...sjOptions, ...editedFields })\n  }\n\n  return (\n    <div>\n      <CategoryH3>Junctions Track <br />Options</CategoryH3><br />\n      <OptionDiv>Color by:</OptionDiv>\n      <OptionDiv>\n        <select value={sjOptions.colorBy} onChange={(e) => updateSjOptions({ colorBy: e.target.value })}>\n          <option value=\"strand\">strand</option>\n          <option value=\"motif\">donor/acceptor motif</option>\n          <option value=\"numUniqueReads\"># uniquely-mapped reads</option>\n          <option value=\"numReads\"># total reads</option>\n          <option value=\"isAnnotatedJunction\">is known junction</option>\n        </select>\n        <ColorByLegend sjOptions={sjOptions} handleTextInput={handleTextInput} />\n      </OptionDiv>\n      <OptionDiv>Junction thickness:</OptionDiv>\n      <OptionDiv>\n        <select value={sjOptions.thicknessBasedOn} onChange={(e) => updateSjOptions({ thicknessBasedOn: e.target.value })}>\n          <option value=\"numUniqueReads\"># uniquely-mapped reads</option>\n          <option value=\"numReads\"># total reads</option>\n          <option value=\"isAnnotatedJunction\">is known junction</option>\n        </select>\n      </OptionDiv>\n      <OptionDiv>Junction bounce height:</OptionDiv>\n      <OptionDiv>\n        <select value={sjOptions.bounceHeightBasedOn} onChange={(e) => updateSjOptions({ bounceHeightBasedOn: e.target.value })}>\n          <option value=\"random\">random</option>\n          <option value=\"distance\">distance</option>\n          <option value=\"thickness\">thickness</option>\n        </select>\n      </OptionDiv>\n      <OptionDiv>Junction label:</OptionDiv>\n      <OptionDiv><Checkbox label=\"# uniquely-mapped\" checked={sjOptions.labelUniqueReadCount} onChange={(e, data) => updateSjOptions({ labelUniqueReadCount: data.checked })} /></OptionDiv>\n      <OptionDiv><Checkbox label=\"# multi-mapped\" checked={sjOptions.labelMultiMappedReadCount} onChange={(e, data) => updateSjOptions({ labelMultiMappedReadCount: data.checked })} /></OptionDiv>\n      <OptionDiv><Checkbox label=\"# total reads\" checked={sjOptions.labelTotalReadCount} onChange={(e, data) => updateSjOptions({ labelTotalReadCount: data.checked })} /></OptionDiv>\n      <OptionDiv><Checkbox label=\"donor/acceptor motif\" checked={sjOptions.labelMotif} onChange={(e, data) => updateSjOptions({ labelMotif: data.checked })} /></OptionDiv>\n      <OptionDiv>\n        <Checkbox label=\"known junction:\" checked={sjOptions.labelAnnotatedJunction} onChange={(e, data) => updateSjOptions({ labelAnnotatedJunction: data.checked })} />\n        <OptionInput key={`junction-label-${sjOptions.labelAnnotatedJunctionValue}`} type=\"text\" defaultValue={sjOptions.labelAnnotatedJunctionValue} onKeyUp={(e) => handleTextInput(e, 'labelAnnotatedJunctionValue')} style={{ width: '35px' }} />\n      </OptionDiv>\n\n      <CategoryH3>Junctions Track Filters</CategoryH3><br />\n      <OptionDiv>\n        Show Strands:\n        <StyledRadio label=\"both\" name=\"strandButton\" checked={!sjOptions.showOnlyPlusStrand && !sjOptions.showOnlyMinusStrand} onChange={(e, data) => data.checked && updateSjOptions({ showOnlyPlusStrand: false, showOnlyMinusStrand: false })} />\n        <StyledRadio label=\"plus\" name=\"strandButton\" checked={sjOptions.showOnlyPlusStrand} onChange={(e, data) => data.checked && updateSjOptions({ showOnlyPlusStrand: true, showOnlyMinusStrand: false })} />\n        <StyledRadio label=\"minus\" name=\"strandButton\" checked={sjOptions.showOnlyMinusStrand} onChange={(e, data) => data.checked && updateSjOptions({ showOnlyPlusStrand: false, showOnlyMinusStrand: true })} />\n      </OptionDiv>\n      <OptionDiv><Checkbox label=\"Show known junctions\" checked={!sjOptions.hideAnnotated} onChange={(e, data) => updateSjOptions({ hideAnnotated: !data.checked })} /></OptionDiv>\n      <OptionDiv><Checkbox label=\"Show novel junctions\" checked={!sjOptions.hideUnannotated} onChange={(e, data) => updateSjOptions({ hideUnannotated: !data.checked })} /></OptionDiv>\n      <div>\n        <OptionDiv>Uniquely-mapped reads:</OptionDiv>\n        at least <OptionInput key={`uniquely-mapped-reads-${sjOptions.minUniquelyMappedReads}`} type=\"text\" defaultValue={sjOptions.minUniquelyMappedReads} onKeyUp={(e) => handleTextInput(e, 'minUniquelyMappedReads', parseInt(e.target.value, 10))} />\n      </div>\n      <div>\n        <OptionDiv>Total reads:</OptionDiv>\n        at least <OptionInput key={`total-reads-${sjOptions.minTotalReads}`} type=\"text\" defaultValue={sjOptions.minTotalReads} onKeyUp={(e) => handleTextInput(e, 'minTotalReads', parseInt(e.target.value, 10))} />\n      </div>\n      <div>\n        <OptionDiv>Fraction multi-mapped:\n          <StyledPopup inverted\n            content=\"Allows filtering of junctions where most reads that span the junction are multi-mapped reads. For example, setting this to 0.79 will hide junctions where 8 out of 10 (or more) reads that span the junction are not uniquely mapped reads.\"\n            position=\"left center\"\n            on=\"click\"\n            trigger={\n              <Icon style={{ marginLeft: '8px' }} name=\"question circle outline\" />\n            }\n          />\n        </OptionDiv>\n        at most <OptionInput key={`fraction-multi-mapped-${sjOptions.maxFractionMultiMappedReads}`} type=\"text\" defaultValue={sjOptions.maxFractionMultiMappedReads} onKeyUp={(e) => handleTextInput(e, 'maxFractionMultiMappedReads', parseInt(e.target.value, 10))} />\n      </div>\n      <div>\n        <OptionDiv>Splice overhang base-pairs:</OptionDiv>\n        at least <OptionInput key={`spliced-alignment-overhang-${sjOptions.minSplicedAlignmentOverhang}`} type=\"text\" defaultValue={sjOptions.minSplicedAlignmentOverhang} onKeyUp={(e) => handleTextInput(e, 'minSplicedAlignmentOverhang', parseInt(e.target.value, 10))} />\n      </div>\n      <div>\n        <OptionDiv>Donor/Acceptor Motifs:</OptionDiv>\n        {\n          SJ_MOTIFS.map((motif) => <OptionDiv key={motif}><Checkbox label={`Show ${motif}`} checked={!sjOptions[`hideMotif${motif}`]} onChange={(e, data) => updateSjOptions({ [`hideMotif${motif}`]: !data.checked })} /></OptionDiv>)\n        }\n      </div>\n      <OptionInputDiv>Track height: <OptionInput key={`track-height-${sjOptions.trackHeight}`} type=\"text\" defaultValue={sjOptions.trackHeight} onKeyUp={(e) => handleTextInput(e, 'trackHeight', parseInt(e.target.value, 10))} /> px</OptionInputDiv>\n      <OptionInputDiv><Button compact size=\"small\" onClick={handleApplyButton}>Apply</Button></OptionInputDiv>\n    </div>)\n}\n\nSpliceJunctionsOptionsPanel.propTypes = {\n  sjOptions: PropTypes.object,\n  updateSjOptions: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  sjOptions: getSjOptions(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateSjOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_SJ_OPTIONS',\n      updates: newSettings,\n    })\n  },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SpliceJunctionsOptionsPanel)\n","/* eslint-disable react/jsx-one-expression-per-line */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\n//import styled from 'styled-components'\nimport { Button, Checkbox } from 'semantic-ui-react'\nimport { CategoryH3, OptionInputDiv, OptionInput } from '../SideBarUtils'\nimport { getGcnvOptions } from '../../redux/selectors'\n\nconst editedFields = {}\n\nconst GcnvOptionsPanel = ({ gcnvOptions, updateGcnvOptions }) => {\n  const handleTextInput = (e, name, value = null) => {\n    if (e.keyCode === 13) {\n      updateGcnvOptions({ ...gcnvOptions, ...editedFields })\n    } else {\n      editedFields[name] = value\n    }\n  }\n\n  const handleApplyButton = () => {\n    updateGcnvOptions({ ...gcnvOptions, ...editedFields })\n  }\n\n  return (\n    <div>\n      <CategoryH3>gCNV Options</CategoryH3><br />\n      <OptionInputDiv><Checkbox label=\"Enable clicking background samples\" checked={!gcnvOptions.onlyHandleClicksForHighlightedSamples} onChange={(e, data) => updateGcnvOptions({ ...gcnvOptions, onlyHandleClicksForHighlightedSamples: !data.checked })} /></OptionInputDiv>\n      <OptionInputDiv>Y-min: <OptionInput key={`y-max-${gcnvOptions.trackMin}`} type=\"text\" defaultValue={gcnvOptions.trackMin} onKeyUp={(e) => handleTextInput(e, 'trackMin', parseInt(e.target.value, 10))} /> copies</OptionInputDiv>\n      <OptionInputDiv>Y-max: <OptionInput key={`y-max-${gcnvOptions.trackMax}`} type=\"text\" defaultValue={gcnvOptions.trackMax} onKeyUp={(e) => handleTextInput(e, 'trackMax', parseInt(e.target.value, 10))} /> copies</OptionInputDiv>\n      <OptionInputDiv>Track height: <OptionInput key={`track-height-${gcnvOptions.trackHeight}`} type=\"text\" defaultValue={gcnvOptions.trackHeight} onKeyUp={(e) => handleTextInput(e, 'trackHeight', parseInt(e.target.value, 10))} /> px</OptionInputDiv>\n      <OptionInputDiv><Button compact size=\"small\" onClick={handleApplyButton}>Apply</Button></OptionInputDiv>\n    </div>)\n}\n\nGcnvOptionsPanel.propTypes = {\n  gcnvOptions: PropTypes.object,\n  updateGcnvOptions: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  gcnvOptions: getGcnvOptions(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateGcnvOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_GCNV_OPTIONS',\n      updates: newSettings,\n    })\n  },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GcnvOptionsPanel)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport EditLocusList from './EditLocusList'\nimport BamOptionsPanel from './optionsPanels/BamOptionsPanel'\nimport VcfOptionsPanel from './optionsPanels/VcfOptionsPanel'\nimport SpliceJunctionsOptionsPanel from './optionsPanels/SpliceJunctionsOptionsPanel'\nimport GcnvOptionsPanel from './optionsPanels/GcnvOptionsPanel'\n\nimport {\n  getRightSideBarLocusList,\n  getEnabledDataTypes,\n} from '../redux/selectors'\n\nclass RightSideBar extends React.PureComponent\n{\n  render() {\n    const {\n      locusList,\n      enabledDataTypes,\n      setLocus,\n      setLocusList,\n    } = this.props\n\n    return (\n      <div>\n        <EditLocusList\n          name=\"Right Side Bar\"\n          locusList={locusList}\n          setLocus={setLocus}\n          setLocusList={setLocusList}\n        />\n\n        {enabledDataTypes.includes('alignment') && <BamOptionsPanel />}\n        {enabledDataTypes.includes('vcf') && <VcfOptionsPanel />}\n        {enabledDataTypes.includes('junctions') && <SpliceJunctionsOptionsPanel />}\n        {enabledDataTypes.includes('gcnv_bed') && <GcnvOptionsPanel />}\n      </div>)\n  }\n}\n\nRightSideBar.propTypes = {\n  locusList: PropTypes.array,\n  enabledDataTypes: PropTypes.array,\n  setLocus: PropTypes.func,\n  setLocusList: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  locusList: getRightSideBarLocusList(state),\n  enabledDataTypes: getEnabledDataTypes(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  setLocus: (locus) => {\n    dispatch({\n      type: 'UPDATE_LOCUS',\n      newValue: locus,\n    })\n  },\n  setLocusList: (locusList) => {\n    dispatch({\n      type: 'SET_RIGHT_SIDE_BAR_LOCUS_LIST',\n      values: locusList,\n    })\n  },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RightSideBar)\n","/* eslint-disable react/jsx-one-expression-per-line */\n/* eslint-disable react/no-unescaped-entities */\n/* eslint-disable  react/jsx-closing-tag-location */\n\nimport React from 'react'\nimport styled from 'styled-components'\nimport { Icon } from 'semantic-ui-react'\nimport Modal from './Modal'\n\nconst LinkButton = styled.a`\n  cursor: pointer;\n  margin-left: 20px;\n`\n\nconst AboutLink = () => (\n  <Modal\n    title=\"About the TGG Viewer\"\n    size=\"large\"\n    modalName=\"AboutModal\"\n    trigger={<LinkButton>About</LinkButton>}\n  >\n    The Translational Genomics Group (TGG) Viewer is a free, open-source web app for visualizing splice junctions, copy number, and other data\n    genome-wide using <a href=\"https://github.com/igvteam/igv.js\" target=\"_blank\">IGV.js</a><br />\n    <br />\n    Main features: <br />\n    <ul>\n      <li>Supports most file formats supported by IGV.js, including: .bed, .vcf, .bam, .cram, .bigWig, as well as\n        several custom formats for splice junctions (.junctions.bed.gz) and gCNV copy-number variants (.gcnv.bed.gz) </li>\n      <li>Includes custom reference tracks such as splice junctions from GTEx v8 muscle, blood, and fibroblast samples.</li>\n      <li>Supports adding gene or locus lists to left or right side bar for quick navigation across a list of regions.</li>\n      <li>Can load data files or reference tracks from any Google bucket to which you have read-access.</li>\n      <li>Retrieves just the on-screen sections of the files directly from Google buckets.</li>\n      <li>All settings, gene lists, and data paths can be exported and later restored or shared with others via a .json config file.\n        To export all current settings, click the <Icon name=\"download\" /> button, upload the .json file to github (or another public url), and then\n        to restore the settings, paste the file's URL into the Initial Settings input, and Apply. </li>\n      <li>The page url also records page settings so that they can be bookmarked or shared, but does not include gene lists.</li>\n    </ul>\n\n    <a href=\"https://github.com/broadinstitute/tgg-viewer/issues\" target=\"_blank\">Issues</a>\n    &nbsp;or <a href=\"https://github.com/broadinstitute/tgg-viewer/issues\" target=\"_blank\">Feature Requests</a>\n    &nbsp;can be submitted via <a href=\"https://github.com/broadinstitute/tgg-viewer\" target=\"_blank\">GitHub</a>.\n  </Modal>\n)\n\nexport default AboutLink\n","/* eslint-disable react/jsx-one-expression-per-line */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { getUser } from '../redux/selectors'\n\n\nclass UserInfo extends React.PureComponent\n{\n  render() {\n\n    const {\n      user,\n    } = this.props\n\n    if (!user.googleUserEmail) {\n      return <div>Signing in to Google Buckets...</div>\n    }\n\n    return <div>Signed in to Google Buckets as <b>{user.googleUserEmail}</b></div>\n  }\n}\n\nUserInfo.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\nconst mapStateToProps = (state) => ({\n  user: getUser(state),\n\n})\n\nexport default connect(mapStateToProps)(UserInfo)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Grid } from 'semantic-ui-react'\nimport AboutLink from './About'\nimport UserInfo from './UserInfo'\n\nconst HeaderRow = styled(Grid.Row)`\n  color: #444;\n  margin-bottom: 5px;\n`\n\nconst Column1 = styled(Grid.Column).attrs({ width: 6 })`\n  text-align: left;\n  padding-left: 75px !important;\n`\nconst Column2 = styled(Grid.Column).attrs({ width: 10 })`\n  text-align: right;\n  padding-right: 75px !important;\n`\n\nexport default () => (\n  <Grid>\n    <HeaderRow>\n      <Column1>\n        <b>TGG Viewer:</b>\n        <AboutLink />\n        {/* <a href=\"#\">Intro Video</a> &nbsp; &nbsp; */}\n      </Column1>\n      <Column2>\n        <UserInfo />\n      </Column2>\n    </HeaderRow>\n  </Grid>)\n","\nexport const throttle = (delay, fn) => {\n  let timerId\n  return (...args) => {\n    if (timerId) {\n      clearTimeout(timerId)\n    }\n    timerId = setTimeout(() => {\n      fn(...args)\n      timerId = null\n    }, delay)\n  }\n}\n","/* eslint-disable eqeqeq */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/no-unused-prop-types */\n\nimport _ from 'lodash'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport igv from 'igv/dist/igv.esm'\nimport { connect } from 'react-redux'\n\nimport {\n  getGenome,\n  getLocus,\n  getTracks,\n  getSelectedSamplesByCategoryNameAndRowName,\n  getEnabledDataTypes,\n  getSjOptions,\n  getVcfOptions,\n  getBamOptions,\n  getGcnvOptions,\n} from '../redux/selectors'\nimport { throttle } from '../utils/throttle'\n\nconst IGV_SETTINGS = {\n  showIdeogram: true,\n  showNavigation: true,\n  showRuler: true,\n  showCenterGuide: true,\n  showCursorTrackingGuide: true,\n  showCommandBar: true,\n}\n\n\nclass IGV extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.container = null\n    this.browser = null\n    this.ignoreNextTrackRemovedEvent = false\n  }\n\n  setContainerElement = (element) => {\n    this.container = element\n  }\n\n  render = () => <div><div ref={this.setContainerElement} /></div>\n\n  async componentDidMount() {\n\n    if (!this.container) {\n      return\n    }\n\n    const {\n      genome,\n      locus,\n      tracks,\n      locusChangedHandler,\n      trackRemovedHandler,\n    } = this.props\n\n    const igvBrowserOptions = {\n      ...IGV_SETTINGS,\n      locus,\n      genome,\n      tracks,\n    }\n\n    console.log('Calling igv.createBrowser(..)', igvBrowserOptions)\n    igv.createBrowser(this.container, igvBrowserOptions).then((browser) => {\n      this.browser = browser\n      window.igvBrowser = browser //for debugging\n\n      if (locusChangedHandler) {\n        this.browser.on('locuschange', throttle(300, locusChangedHandler))\n      }\n\n      if (trackRemovedHandler) {\n        this.browser.on('trackremoved', (track) => {\n          if (!this.ignoreNextTrackRemovedEvent) {\n            trackRemovedHandler(track.config.categoryName, track.config.rowName)\n          }\n          this.ignoreNextTrackRemovedEvent = false\n        })\n      }\n    })\n  }\n\n  shouldTrackBeReloaded = (track, props, nextProps) => {\n    const {\n      selectedSamplesByCategoryNameAndRowName,\n      enabledDataTypes,\n      sjOptions,\n      vcfOptions,\n      bamOptions,\n      gcnvOptions,\n    } = props\n\n    const junctionTrackDisplaySettingsChanged = ['merged', 'wig', 'spliceJunctions'].includes(track.type) && (\n      nextProps.enabledDataTypes.includes('junctions') !== enabledDataTypes.includes('junctions')\n      || nextProps.enabledDataTypes.includes('coverage') !== enabledDataTypes.includes('coverage')\n      || nextProps.sjOptions !== sjOptions)\n    const vcfTrackDisplaySettingsChanged = track.type === 'variant' && nextProps.vcfOptions !== vcfOptions\n    const alignmentTrackDisplaySettingsChanged = track.type === 'alignment' && nextProps.bamOptions !== bamOptions\n    const gcnvTrackDisplaySettingsChanged = track.type === 'gcnv' && nextProps.gcnvOptions !== gcnvOptions\n    const gcnvTrackHighlightedSamplesChanged = track.type === 'gcnv' && (\n      !_.isEqual(\n        ((nextProps.selectedSamplesByCategoryNameAndRowName[track.categoryName] || {}).selectedSamples || {})[track.rowName],\n        ((selectedSamplesByCategoryNameAndRowName[track.categoryName] || {}).selectedSamples || {})[track.rowName])\n      || !_.isEqual(\n        ((nextProps.selectedSamplesByCategoryNameAndRowName[track.categoryName] || {}).sampleSettings || {})[track.rowName],\n        ((selectedSamplesByCategoryNameAndRowName[track.categoryName] || {}).sampleSettings || {})[track.rowName])\n    )\n\n    return junctionTrackDisplaySettingsChanged\n      || vcfTrackDisplaySettingsChanged\n      || alignmentTrackDisplaySettingsChanged\n      || gcnvTrackDisplaySettingsChanged\n      || gcnvTrackHighlightedSamplesChanged\n  }\n\n  getTrackId = (track) => `${track.url}|${track.categoryName}|${track.rowName}`\n\n  getIgvTrackView = (track) => {\n    const trackId = this.getTrackId(track)\n\n    const existingTrackViews = this.browser.trackViews.filter((existingTrackView) => {\n      const existingTrackConfig = (existingTrackView.track || {}).config || {}\n      return trackId === this.getTrackId(existingTrackConfig)\n    })\n\n    return existingTrackViews.length > 0 && existingTrackViews[0]\n  }\n\n  reloadRemoveAndAddTracks = (nextProps) => {\n\n    const nextTrackByTrackName = nextProps.tracks.reduce((acc, track) => {\n      return { [track.name]: track, ...acc }\n    }, {})\n\n    //console.log('IGV.nextProps:', nextProps)\n\n    // reload or remove existing tracks\n    this.props.tracks.forEach((track) => {\n      const nextTrack = nextTrackByTrackName[track.name]\n      if (nextTrack) {\n        if (this.shouldTrackBeReloaded(track, this.props, nextProps))\n        {\n          console.log('Reloading track', track.name)\n          this.ignoreNextTrackRemovedEvent = true\n          this.browser.removeTrackByName(track.name)\n          if (!this.getIgvTrackView(track)) { // double-check that the track isn't already loaded\n            //console.log('calling this.browser.loadTrack for', track.name)\n            this.browser.loadTrack(nextTrack)\n          }\n        }\n\n        // delete track from nextTrackByTrackName to indicate that it's still selected\n        delete nextTrackByTrackName[track.name]\n\n      } else {\n        // remove track that was de-selected\n        try {\n          console.log('Removing track', track.name)\n          this.ignoreNextTrackRemovedEvent = true\n          this.browser.removeTrackByName(track.name)\n        } catch (e) {\n          console.warn('Unable to remove track', track.name, e)\n        }\n      }\n    })\n\n    // load any newly-selected track(s)\n    const remainingTracks = Object.values(nextTrackByTrackName)\n    remainingTracks.forEach((track) => {\n      try {\n        if (!this.getIgvTrackView(track)) { // double-check that the track isn't already loaded\n          console.log('Loading new track', track.name)\n          this.browser.loadTrack(track)\n        }\n      } catch (e) {\n        console.warn('Unable to add track', track.name, e)\n      }\n    })\n  }\n\n  shouldComponentUpdate(nextProps) {\n    if (!this.container || !this.browser) {\n      return false\n    }\n\n    //update locus\n    const currentIGVLocus = this.browser.$searchInput.val()\n    const nextIGVLocus = nextProps.locus\n    if (nextProps.locus && (!currentIGVLocus || nextIGVLocus.replace(/,/g, '') !== currentIGVLocus.replace(/,/g, ''))) {\n      this.browser.search(nextIGVLocus)\n    }\n\n    this.reloadRemoveAndAddTracks(nextProps)\n\n    return false\n  }\n}\n\nIGV.propTypes = {\n  genome: PropTypes.string.isRequired,\n  locus: PropTypes.string.isRequired,\n  tracks: PropTypes.array.isRequired,\n  selectedSamplesByCategoryNameAndRowName: PropTypes.object.isRequired,\n  enabledDataTypes: PropTypes.array.isRequired,\n  locusChangedHandler: PropTypes.func,\n  trackRemovedHandler: PropTypes.func,\n  sjOptions: PropTypes.object,\n  vcfOptions: PropTypes.object,\n  bamOptions: PropTypes.object,\n  gcnvOptions: PropTypes.object,\n}\n\nconst mapStateToProps = (state) => ({\n  genome: getGenome(state),\n  locus: getLocus(state),\n  tracks: getTracks(state),\n  enabledDataTypes: getEnabledDataTypes(state),\n  selectedSamplesByCategoryNameAndRowName: getSelectedSamplesByCategoryNameAndRowName(state),\n  sjOptions: getSjOptions(state),\n  vcfOptions: getVcfOptions(state),\n  bamOptions: getBamOptions(state),\n  gcnvOptions: getGcnvOptions(state),\n})\n\n\nconst mapDispatchToProps = (dispatch) => ({\n  locusChangedHandler: (event) => {\n    const newLocus = event.label.replace(/,/g, '')\n\n    dispatch({\n      type: 'UPDATE_LOCUS',\n      newValue: newLocus,\n    })\n  },\n\n  trackRemovedHandler: (categoryName, trackName) => {\n    dispatch({\n      type: 'REMOVE_SELECTED_ROW_NAMES',\n      categoryName,\n      selectedRowNames: [trackName],\n    })\n  },\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(IGV)\n","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/require-optimization */\n/* eslint-disable react/jsx-one-expression-per-line */\n/* eslint-disable operator-linebreak */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { GoogleLogin } from 'react-google-login'\nimport IGV from './IGV'\nimport { getGoogleUserEmail, googleSignIn, initGoogleClient } from '../utils/googleAuth'\nimport { getInitialSettingsUrl, getRowsInCategories } from '../redux/selectors'\n\nconst SignInButtonContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: 50px;\n`\n\nconst InfoContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: 50px;\n  margin-left: 100px;\n  word-wrap: break-word;\n  word-break: break-all;\n`\n\nclass LoginAndShowIGV extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {}\n  }\n\n  handleGoogleSignIn = (user) => {\n    const profile = user && user.getBasicProfile()\n    const googleUserEmail = profile && profile.getEmail()\n\n    this.setState({ show: googleUserEmail ? 'igv' : 'signin-button' })\n    this.props.userChangedHandler(googleUserEmail)\n  }\n\n  async componentDidMount() {\n\n    // TODO check if any tracks need google sign-in\n    try {\n      await initGoogleClient()\n      await googleSignIn()\n    } catch (e) {\n      console.error('Error during google sign-in:', e)\n      this.setState({ show: 'signin-button' })\n      return\n    }\n    const googleUserEmail = await getGoogleUserEmail()\n\n    this.setState({ show: googleUserEmail ? 'igv' : 'signin-button' })\n    this.props.userChangedHandler(googleUserEmail)\n  }\n\n  render = () => {\n    if (this.state.show === 'igv') {\n      return <IGV />\n    }\n\n    if (this.state.show === 'signin-button') {\n      let dataPathCounter = 0\n      const buckets = new Set()\n      this.props.rowsInCategories.forEach((category) => {\n        category.rows.forEach((row) => {\n          if (row.data) {\n            row.data.forEach((data) => {\n              if (data.url && data.url.startsWith('gs://')) {\n                dataPathCounter += 1\n\n                const urlTokens = data.url.split('/')\n                const bucket = urlTokens[2]\n                if (bucket !== 'tgg-viewer') {\n                  buckets.add(bucket)\n                }\n              }\n            })\n          }\n        })\n      })\n\n      if (dataPathCounter === 0) {\n        return <InfoContainer>No dataset paths loaded. &nbsp; Please specify an Initial settings url.</InfoContainer>\n      }\n\n      return (\n        <div>\n          <InfoContainer>\n            <div>\n              Retrieved {dataPathCounter} data paths from settings file: <a href={this.props.initialSettingsUrl} target=\"_blank\">{this.props.initialSettingsUrl}</a><br />\n              <br />\n            </div>\n\n            {\n              buckets.size > 0 &&\n              <div>\n                To view this data, you should have read access to the following Google Storage buckets:\n                <ul>\n                  {\n                    Array.from(buckets).map((bucket) => <li key={bucket}><a href={`https://console.cloud.google.com/storage/browser/${bucket}`} target=\"_blank\">{bucket}</a></li>)\n                  }\n                </ul>\n              </div>\n            }\n          </InfoContainer>\n          <SignInButtonContainer>\n            <GoogleLogin\n              clientId={window.TGG_VIEWER_CLIENT_ID}\n              theme=\"dark\"\n              buttonText=\"Sign in with Google\"\n              onSuccess={this.handleGoogleSignIn}\n              onFailure={this.handleGoogleSignIn}\n              cookiePolicy=\"single_host_origin\"\n            />\n          </SignInButtonContainer>\n        </div>)\n\n    }\n\n    return null\n  }\n}\n\nLoginAndShowIGV.propTypes = {\n  rowsInCategories: PropTypes.array,\n  initialSettingsUrl: PropTypes.string,\n  userChangedHandler: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  rowsInCategories: getRowsInCategories(state),\n  initialSettingsUrl: getInitialSettingsUrl(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  userChangedHandler: (googleUserEmail) => {\n    dispatch({\n      type: 'UPDATE_USER',\n      updates: { googleUserEmail },\n    })\n  },\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginAndShowIGV)\n","/* eslint-disable react/destructuring-assignment */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { Icon, Popup } from 'semantic-ui-react'\n\n\nclass RequestStatus extends React.PureComponent {\n\n  static NONE = 'NONE'\n\n  static IN_PROGRESS = 'IN_PROGRESS'\n\n  static SUCCEEDED = 'SUCCEEDED'\n\n  static ERROR = 'ERROR'\n\n  render() {\n    switch (this.props.status) {\n      case RequestStatus.IN_PROGRESS:\n        return <Icon loading name=\"spinner\" style={{ color: '#4183c4' }} />\n      case RequestStatus.SUCCEEDED:\n        return <Popup\n          trigger={\n            <Icon name=\"check circle\" style={{ color: '#00C000' }} />\n          }\n          content={this.props.successMessage || 'Success'}\n          position=\"top center\"\n          size=\"small\"\n        />\n      case RequestStatus.ERROR:\n        return <Popup\n          trigger={\n            <Icon name=\"warning circle\" style={{ color: '#F00000' }} />\n          }\n          content={this.props.errorMessage || ''}\n          position=\"top center\"\n          size=\"small\"\n        />\n      default:\n        return <Icon name=\"warning circle\" style={{ color: 'rgb(0,0,0,0.0)' }} />\n    }\n  }\n}\n\nRequestStatus.propTypes = {\n  status: PropTypes.string,\n  errorMessage: PropTypes.string,\n  successMessage: PropTypes.string,\n}\n\nexport default RequestStatus\n","import LZString from 'lz-string'\n\n/* in-memory cache to avoid unnecessary compression/decompression */\nconst CACHE = {}\n\n/**\n * Uses the localStorage API to save a state object in the browser under the given label.\n * @param label {string}\n * @param state {object}\n */\nexport const saveState = (label, state) => {\n  try {\n    const jsonString = JSON.stringify(state)\n    if (CACHE[label] === jsonString) {\n      return\n    }\n    console.warn(`LocalStorage: compressing ${label}`)\n    const serializedState = LZString.compress(jsonString)\n    localStorage.setItem(label, serializedState)\n    CACHE[label] = jsonString\n  } catch (err) {\n    console.warn('Unable to save state: ', label, state, err)\n  }\n}\n\n\n/**\n * Uses the localStorage API to restored a previously-saved state object.\n * @param label {string}\n * @param state {object}\n */\nexport const loadState = (label) => {\n  try {\n    const serializedState = localStorage.getItem(label)\n    const jsonString = LZString.decompress(serializedState)\n    CACHE[label] = jsonString\n\n    if (jsonString === null) {\n      return undefined\n    }\n\n    return JSON.parse(jsonString)\n  } catch (err) {\n    return undefined\n  }\n}\n","/* eslint-disable operator-linebreak */\n/* eslint-disable no-unused-vars */\n\nimport jsurl from 'jsurl'\n\nimport { loadState, saveState } from '../utils/localStorage'\n\n\nconst INITIAL_ROWS_IN_CATEGORIES = []\n\nexport const DEFAULT_STATE = {\n  genome: 'hg38',\n  locus: 'chr15:92,835,700-93,031,800',\n  dataTypesToShow: ['junctions', 'coverage', 'vcf', 'gcnv_bed'],\n  leftSideBarLocusList: [],\n  rightSideBarLocusList: [],\n  rowsInCategories: INITIAL_ROWS_IN_CATEGORIES,\n  selectedRowNamesByCategoryName: {},\n  sjOptions: {\n    trackHeight: 170,\n    hideAnnotated: false,\n    hideUnannotated: false,\n    colorBy: 'strand',\n    minUniquelyMappedReads: 0,\n    minTotalReads: 1,\n    maxFractionMultiMappedReads: 1,\n    minSplicedAlignmentOverhang: 0,\n    thicknessBasedOn: 'numUniqueReads', //options: numUniqueReads (default), numReads, isAnnotatedJunction\n    bounceHeightBasedOn: 'random', //options: random (default), distance, thickness\n    labelUniqueReadCount: true,\n    labelMultiMappedReadCount: false,\n    labelTotalReadCount: false,\n    labelMotif: false,\n    labelAnnotatedJunction: false,\n    labelAnnotatedJunctionValue: ' [A]',\n  },\n  vcfOptions: {\n    displayMode: 'EXPANDED',\n  },\n  bamOptions: {\n    trackHeight: 200,\n    showSoftClips: true,\n    alignmentShading: 'strand',\n  },\n  gcnvOptions: {\n    trackHeight: 200,\n    trackMin: 0,\n    trackMax: 5,\n    autoscale: false,\n    onlyHandleClicksForHighlightedSamples: true,\n  },\n  initialSettingsUrl: '',\n}\n\n\nconst KEYS_TO_PERSIST_IN_LOCAL_STORAGE = [\n  'leftSideBarLocusList', 'rightSideBarLocusList',\n]\n\nexport const getStateFromLocalStorage = () => {\n  // restore values from local storage\n  const stateFromLocalStorage = KEYS_TO_PERSIST_IN_LOCAL_STORAGE.reduce((acc, key) => {\n    const v = loadState(key)\n    if (v !== undefined) {\n      acc[key] = v\n    }\n    return acc\n  }, {})\n\n  return stateFromLocalStorage\n}\n\nconst KEYS_TO_PERSIST_IN_URL = {\n  locus: 'locus',\n  dataTypesToShow: 'show',\n  selectedRowNamesByCategoryName: 'selectedRows',\n  selectedSamplesByCategoryNameAndRowName: 'selectedSamples',\n  sjOptions: 'sjOptions',\n  vcfOptions: 'vcfOptions',\n  bamOptions: 'bamOptions',\n  gcnvOptions: 'gcnvOptions',\n  initialSettingsUrl: 'settingsUrl',\n}\n\nexport const getStateFromUrlHash = () => {\n  // restore values from url\n  const REVERSE_KEY_NAME_LOOKUP = Object.entries(KEYS_TO_PERSIST_IN_URL).reduce(\n    (acc, [key, value]) => {\n      return { ...acc, [value]: key }\n    }, {})\n  const hashString = window.location.hash.replace(/^#/, '')\n\n  const stateFromUrlHash = hashString ?\n    hashString.split('&').reduce((acc, keyValue) => {\n      const keyValueList = keyValue.split('=')\n      const key = (keyValueList[0] in REVERSE_KEY_NAME_LOOKUP) ? REVERSE_KEY_NAME_LOOKUP[keyValueList[0]] : keyValueList[0]\n      if (key === 'locus') {\n        acc = { ...acc, [key]: keyValueList[1] }\n      } else {\n        try {\n          acc[key] = jsurl.parse(keyValueList[1])\n        } catch (e) {\n          console.error('Couldn\\'t parse url hash param', keyValueList[0], ': ', keyValueList[1])\n        }\n      }\n      return acc\n    }, {})\n    : {}\n\n  return stateFromUrlHash\n}\n\nexport const computeInitialState = () => {\n\n  const stateFromLocalStorage = getStateFromLocalStorage()\n  const stateFromUrlHash = getStateFromUrlHash()\n\n  // default values are over-ridden by values from local storage, which are over-ridden by values from the url\n  const initialState = { ...DEFAULT_STATE, ...stateFromLocalStorage, ...stateFromUrlHash }\n\n  return initialState\n}\n\n\nexport const updateLocalStorageAndUrl = (state) => {\n  //update local storage\n\n  KEYS_TO_PERSIST_IN_LOCAL_STORAGE.forEach((key) => {\n    saveState(key, state[key])\n  })\n\n  //update url\n  const hashString = Object.keys(state)\n    .filter((key) => (key in KEYS_TO_PERSIST_IN_URL))\n    .reduce((hashKeyValueList, key) => {\n      const value = key === 'locus' ? state[key].replace(',', '') : jsurl.stringify(state[key])\n      return [\n        ...hashKeyValueList,\n        `${KEYS_TO_PERSIST_IN_URL[key]}=${value}`,\n      ]\n    }, []).join('&')\n\n  window.location.hash = `#${hashString}`\n}\n","/* eslint-disable react/no-find-dom-node */\n/* eslint-disable react/destructuring-assignment */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { Button, Input, Popup } from 'semantic-ui-react'\nimport delay from 'timeout-as-promise'\nimport yaml from 'js-yaml'\nimport { getInitialSettingsUrl } from '../redux/selectors'\nimport RequestStatus from './RequestStatus'\nimport { DEFAULT_STATE, getStateFromLocalStorage, getStateFromUrlHash } from '../redux/initialState'\n\nconst StyledDiv = styled.div`\n  color: #999;\n  width: 100%;\n  text-align: center;\n  \n  .ui.label {\n    color: #444;\n    background-color: #f3f3f3;\n  }\n`\n\nconst StyledInput = styled(Input)`\n  margin-top: 100px;\n  width: calc(100% - 350px);\n`\n\nconst StyledButton = styled(Button)`\n  margin-left: 20px !important;\n  margin-right: 15px !important;\n`\n\nclass InitialSettingsForm extends React.PureComponent\n{\n  constructor(props) {\n    super(props)\n    this.textInputValue = props.initialSettingsUrl || ''\n    this.state = {\n      requestStatus: RequestStatus.NONE,\n      successMessage: '',\n      errorMessage: '',\n    }\n  }\n\n  async componentDidMount() {\n    const { initialSettingsUrl } = this.props\n    if (initialSettingsUrl) {\n      // download url\n      console.log('Loading settings from', initialSettingsUrl)\n      await this.applyInitialSettingsUrl(initialSettingsUrl, false)\n    }\n  }\n\n  loadInitialSettingsUrl = async (url, overrideLocalSettings) => {\n    const {\n      globalState,\n      updateInitialSettingsUrl,\n      resetGlobalState,\n    } = this.props\n\n    if (!url) {\n      //reset url to empty\n      resetGlobalState({ ...DEFAULT_STATE, ...{ user: globalState.user } })\n      updateInitialSettingsUrl('')\n      return\n    }\n\n    let stateFromLocalStorage\n    let stateFromUrlHash\n    if (!overrideLocalSettings) {\n      stateFromLocalStorage = getStateFromLocalStorage()\n      stateFromUrlHash = getStateFromUrlHash()\n    }\n\n    //validate url\n    if (url.search(':') === -1 || url.search('/') === -1) {\n      throw new Error(`Invalid url: \"${url}\"`)\n    }\n\n    const isYaml = url.search('.yaml') !== -1 || url.search('.yml') !== -1\n    const isJson = url.search('.json') !== -1\n    const isUnknown = !isYaml && !isJson\n\n    //NOTE: changed my mind about requiring a .yaml or .json extension to allow for more flexibility.\n    //if (!isYamlURL && !isJsonURL) {\n    //  throw new Error('Expected file extensions (\".yaml\", \".yml\", or \".json\") not found in the URL')\n    //}\n\n    const response = await fetch(url)\n    if (!response.ok) {\n      throw new Error(`Couldn't load URL. Error: ${response.statusText.toLowerCase()} (${response.status})`)\n    }\n\n    const fileContents = await response.text()\n\n    let settings = null\n    if (!settings && (isYaml || isUnknown)) {\n      try {\n        settings = yaml.safeLoad(fileContents)\n      } catch (e) {\n        if (isYaml) {\n          console.error(`Unable to parse YAML file: ${url}. ${e}`)\n          return\n        }\n      }\n    }\n\n    if (!settings && (isJson || isUnknown)) {\n      try {\n        settings = JSON.parse(fileContents)\n      } catch (e) {\n        if (isJson) {\n          console.error(`Unable to parse JSON file: ${url}. ${e}`)\n          return\n        }\n      }\n    }\n\n    if (!settings) {\n      console.error(`Unable to parse JSON or YAML from: ${url}`)\n      return\n    }\n\n    // TODO validate settings more\n\n    // filter settings to keys in globalState\n    const filteredSettings = Object.keys(globalState).reduce((acc, key) => {\n      if (key in settings) {\n        return { ...acc, [key]: settings[key] }\n      }\n      return acc\n    }, {})\n\n    console.log('Retrieved state from config file:', filteredSettings)\n\n    // apply settings\n    let newState = { ...globalState, ...filteredSettings }\n    if (!overrideLocalSettings) {\n      console.log('Applying settings from local storage', stateFromLocalStorage)\n      console.log('Applying settings from url hash', stateFromUrlHash)\n      newState = { ...newState, ...stateFromLocalStorage, ...stateFromUrlHash }\n    }\n\n    console.log('Setting global state to', newState)\n    resetGlobalState(newState)\n    updateInitialSettingsUrl(url)\n  }\n\n  applyInitialSettingsUrl = async (url, overrideLocalSettings = false) => {\n\n    this.setState({ requestStatus: RequestStatus.IN_PROGRESS })\n\n    if (url.startsWith('https://github.com/')) {\n      // switch to the github raw url\n      url = url.replace('https://github.com', 'https://raw.githubusercontent.com').replace('blob/', '')\n    }\n\n    try {\n      await this.loadInitialSettingsUrl(url, overrideLocalSettings)\n\n      this.setState({ requestStatus: RequestStatus.SUCCEEDED, successMessage: url ? 'Successfully loaded URL and applied settings' : 'Reset all settings to defaults' })\n    } catch (e) {\n      this.setState({ requestStatus: RequestStatus.ERROR, errorMessage: e.toString() })\n    }\n\n    // wait and then clear the message\n    await delay(10000)\n    if (this.state.requestStatus !== RequestStatus.IN_PROGRESS) {\n      this.setState({ requestStatus: RequestStatus.NONE, errorMessage: '' })\n    }\n  }\n\n  exportCurrentSettings = () => {\n    //convert global state to a JSON string\n    const EXCLUDED_KEYS = ['user', 'modals']\n    const globalStateForExport = Object.keys(this.props.globalState).reduce((acc, key) => {\n      if (!EXCLUDED_KEYS.includes(key)) {\n        acc[key] = this.props.globalState[key]\n      }\n      return acc\n    }, {})\n\n    return encodeURIComponent(JSON.stringify(globalStateForExport, null, 5))\n  }\n\n  render() {\n    const {\n      initialSettingsUrl,\n    } = this.props\n\n    return (\n      <StyledDiv align=\"center\">\n        <StyledInput\n          label=\"Initial settings:\"\n          defaultValue={initialSettingsUrl}\n          placeholder=\"URL of .yaml or .json settings file (eg. http://.../settings.json), or blank to reset all settings to defaults.\"\n          onChange={(e) => { this.textInputValue = e.target.value }}\n          onKeyUp={(e) => e.keyCode === 13 && this.applyInitialSettingsUrl(e.target.value, true)}\n        />\n        <StyledButton\n          content=\"Apply\"\n          onClick={() => this.applyInitialSettingsUrl(this.textInputValue, true)}\n        />\n        <RequestStatus\n          status={this.state.requestStatus}\n          errorMessage={this.state.errorMessage}\n          successMessage={this.state.successMessage}\n        />\n        <Popup\n          content=\"Export current settings to a .json file. If you then upload this file to a public url (for example to github) and then paste the url here, these settings will be restored.\"\n          position=\"right center\"\n          trigger={\n            <a download=\"settings.json\" href={`data:text/json;charset=utf-8,${this.exportCurrentSettings()}`}>\n              <Button icon=\"download\" />\n            </a>\n          }\n        />\n      </StyledDiv>)\n  }\n}\n\nInitialSettingsForm.propTypes = {\n  initialSettingsUrl: PropTypes.string.isRequired,\n  globalState: PropTypes.object,\n  updateInitialSettingsUrl: PropTypes.func,\n  resetGlobalState: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  globalState: state,\n  initialSettingsUrl: getInitialSettingsUrl(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateInitialSettingsUrl: (newUrl) => {\n    dispatch({\n      type: 'UPDATE_INITIAL_SETTINGS_URL',\n      newValue: newUrl,\n    })\n  },\n  resetGlobalState: (state) => {\n    dispatch({\n      type: 'RESET_GLOBAL_STATE',\n      newState: state,\n    })\n  },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InitialSettingsForm)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Grid } from 'semantic-ui-react'\nimport LeftSideBar from './LeftSideBar'\nimport RightSideBar from './RightSideBar'\nimport Header from './Header'\nimport LoginAndShowIGV from './LoginAndShowIGV'\nimport InitialSettingsForm from './InitialSettingsForm'\n\nconst StyledDiv = styled.div`\n  padding: 10px 20px;\n`\n\nconst SIDE_BAR_WIDTH = 210\n\nconst SideBarColumn = styled(Grid.Column)`\n  min-width: ${SIDE_BAR_WIDTH}px !important;\n`\n\nconst MiddleColumn = styled(Grid.Column)`\n  min-width: calc(99% - ${2 * SIDE_BAR_WIDTH + 5}px) !important;\n`\n\nexport default () => (\n  <StyledDiv>\n    <Grid>\n      <Grid.Row>\n        <SideBarColumn><LeftSideBar /></SideBarColumn>\n        <MiddleColumn>\n          <Header />\n          <LoginAndShowIGV />\n          <InitialSettingsForm />\n        </MiddleColumn>\n        <SideBarColumn><RightSideBar /></SideBarColumn>\n      </Grid.Row>\n    </Grid>\n  </StyledDiv>\n)\n","/* eslint-disable prefer-object-spread */\nimport { createStore, applyMiddleware, compose, combineReducers } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport { updateLocalStorageAndUrl, computeInitialState } from './initialState'\n\n\nimport {\n  zeroActionsReducer,\n  createSingleValueReducer,\n  createSingleObjectReducer,\n  createArrayReducer,\n} from './utils/reducerFactories'\n\nimport modalReducers from './utils/modalReducer'\n\n\nconst rowsInCategoriesReducer = (state, action) => {\n  if (!action || !action.categoryName || !action.rows) {\n    return state || []\n  }\n\n  return state.map((category) => {\n    if (category.categoryName !== action.categoryName) {\n      return category\n    }\n\n    let updatedRows\n    switch (action.type) {\n      case 'SET_ROWS': {\n        updatedRows = [...action.rows]\n        break\n      }\n      case 'ADD_ROWS': {\n        const existingNames = category.rows.map((row) => row.name)\n        updatedRows = [...category.rows, ...action.rows.filter((row) => !existingNames.includes(row.name))]\n        break\n      }\n      default:\n        updatedRows = category.rows\n    }\n\n    const result = {\n      ...category,\n      rows: updatedRows,\n    }\n    return result\n  })\n}\n\n\nconst selectedRowNamesByCategoryNameReducer = (state, action) => {\n  if (!action || !action.categoryName || !Array.isArray(action.selectedRowNames)) {\n    return state || {}\n  }\n  const previousList = state[action.categoryName] || []\n  switch (action.type) {\n    case 'SET_SELECTED_ROW_NAMES':\n    case 'ADD_SELECTED_ROW_NAMES':\n    case 'REMOVE_SELECTED_ROW_NAMES': {\n      let updatedList\n      if (action.type === 'SET_SELECTED_ROW_NAMES') {\n        updatedList = Array.from(new Set(action.selectedRowNames)) // make a copy of action.values\n      } else if (action.type === 'ADD_SELECTED_ROW_NAMES') {\n        updatedList = Array.from(new Set([...previousList, ...action.selectedRowNames]))\n      } else {\n        const valuesToRemove = action.selectedRowNames\n        updatedList = previousList.filter((v) => !valuesToRemove.includes(v))\n      }\n\n      return {\n        ...state,\n        [action.categoryName]: updatedList,\n      }\n    }\n    default:\n      console.trace(`Unknown action type: ${action.type}`)\n  }\n\n  return state\n}\n\n\nconst selectedSamplesByCategoryNameAndRowNameReducer = (state, action) => {\n  if (!action || !action.categoryName || (!action.selectedSamplesByRowName && !action.sampleSettingsByRowNameAndSampleName)) {\n    return state || {}\n  }\n\n  const categoryObj = state[action.categoryName] || {}\n  const previousSelectedSamplesByRowName = categoryObj.selectedSamples || {}\n  const previousSampleSettingsByRowNameAndSampleName = categoryObj.sampleSettings || {}\n  let updatedSelectedSamplesByRowName = previousSelectedSamplesByRowName\n  let updatedSampleSettingsByRowNameAndSampleName = previousSampleSettingsByRowNameAndSampleName\n\n  switch (action.type) {\n    case 'SET_SELECTED_SAMPLES':\n    case 'ADD_SELECTED_SAMPLES':\n    case 'REMOVE_SELECTED_SAMPLES': {\n      if (action.type === 'SET_SELECTED_SAMPLES') {\n        updatedSelectedSamplesByRowName = { ...previousSelectedSamplesByRowName, ...action.selectedSamplesByRowName }\n      } else if (action.type === 'ADD_SELECTED_SAMPLES') {\n        updatedSelectedSamplesByRowName = Array.from(new Set([\n          ...Object.keys(previousSelectedSamplesByRowName),\n          ...Object.keys(action.selectedSamplesByRowName),\n        ])).reduce((acc, rowName) => {\n          acc[rowName] = Array.from(new Set([...(previousSelectedSamplesByRowName[rowName] || []), ...(action.selectedSamplesByRowName[rowName] || [])]))\n\n          return acc\n        }, {})\n      } else {\n        updatedSelectedSamplesByRowName = Object.keys(previousSelectedSamplesByRowName).reduce((acc, rowName) => {\n          const valuesToRemove = action.selectedSamplesByRowName[rowName] || []\n          const updatedList = (previousSelectedSamplesByRowName[rowName] || []).filter((v) => !valuesToRemove.includes(v))\n          if (updatedList.length > 0) {\n            acc[rowName] = updatedList\n          }\n          return acc\n        }, {})\n      }\n      break\n    }\n\n    case 'UPDATE_SAMPLE_SETTINGS': {\n      updatedSampleSettingsByRowNameAndSampleName = {\n        ...previousSampleSettingsByRowNameAndSampleName,\n        ...action.sampleSettingsByRowNameAndSampleName,\n      }\n      Object.keys(action.sampleSettingsByRowNameAndSampleName).forEach((rowName) => {\n        const previousSampleSettingsBySampleName = previousSampleSettingsByRowNameAndSampleName[rowName] || {}\n        const newSampleSettingsBySampleName = action.sampleSettingsByRowNameAndSampleName[rowName]\n        const mergedSamplesSettingsBySampleName = {\n          ...previousSampleSettingsBySampleName,\n          ...newSampleSettingsBySampleName,\n        }\n        Object.entries(newSampleSettingsBySampleName).forEach(\n          ([sampleName, sampleSettings]) => {\n            const mergedSampleSettings = {\n              ...previousSampleSettingsBySampleName[sampleName] || {},\n              ...sampleSettings,\n            }\n            mergedSamplesSettingsBySampleName[sampleName] = mergedSampleSettings\n          })\n        updatedSampleSettingsByRowNameAndSampleName[rowName] = mergedSamplesSettingsBySampleName\n      })\n      break\n    }\n\n    default: {\n      console.trace(`Unknown action type: ${action.type}`)\n      return state\n    }\n  }\n\n  return {\n    ...state,\n    [action.categoryName]: {\n      selectedSamples: updatedSelectedSamplesByRowName,\n      sampleSettings: updatedSampleSettingsByRowNameAndSampleName,\n    },\n  }\n}\n\n// combined reducers\nconst otherReducers = combineReducers(Object.assign({\n  genome: zeroActionsReducer,\n  locus: createSingleValueReducer('UPDATE_LOCUS', ''),\n  rightSideBarLocusList: createArrayReducer('RIGHT_SIDE_BAR_LOCUS_LIST'),\n  leftSideBarLocusList: createArrayReducer('LEFT_SIDE_BAR_LOCUS_LIST'),\n  dataTypesToShow: createArrayReducer('DATA_TYPES_TO_SHOW'),\n  rowsInCategories: rowsInCategoriesReducer,\n  selectedRowNamesByCategoryName: selectedRowNamesByCategoryNameReducer,\n  selectedSamplesByCategoryNameAndRowName: selectedSamplesByCategoryNameAndRowNameReducer,\n  sjOptions: createSingleObjectReducer('UPDATE_SJ_OPTIONS'),\n  vcfOptions: createSingleObjectReducer('UPDATE_VCF_OPTIONS'),\n  bamOptions: createSingleObjectReducer('UPDATE_BAM_OPTIONS'),\n  gcnvOptions: createSingleObjectReducer('UPDATE_GCNV_OPTIONS'),\n  user: createSingleObjectReducer('UPDATE_USER'),\n  initialSettingsUrl: createSingleValueReducer('UPDATE_INITIAL_SETTINGS_URL', ''),\n}, modalReducers))\n\n\nconst rootReducer = (state, action) => {\n  if (action.type === 'RESET_GLOBAL_STATE') {\n    return action.newState\n  }\n\n  const nextState = otherReducers(state, action)\n\n  updateLocalStorageAndUrl(nextState)\n  return nextState\n}\n\n\n/**\n * Initialize and return the Redux store\n * @param rootReducer\n * @param initialState\n * @returns {*}\n */\nexport const createReduxStore = () => {\n\n  const initialState = computeInitialState()\n\n  console.log('Initializing store to:', initialState)\n\n  return createStore(rootReducer, initialState, compose(applyMiddleware(thunkMiddleware)))\n}\n","import React from 'react'\nimport { Provider } from 'react-redux'\n\nimport BaseLayout from './components/BaseLayout'\nimport { createReduxStore } from './redux/rootReducer'\n\nfunction App() {\n  return (\n    <Provider store={createReduxStore()}>\n      <BaseLayout />\n    </Provider>)\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}